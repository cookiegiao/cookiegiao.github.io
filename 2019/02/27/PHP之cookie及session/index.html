<!DOCTYPE HTML>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>PHP之cookie-session</title>
<meta name="author" content="John Doe">
<!--[if IE]>
  <meta http-equiv=refresh content='0, http://browsehappy.com'>
<![endif]-->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css">
<link rel="stylesheet" href="/css/style.css">


<body oncontextmenu='return false'>
  <div class=aios_content>
    <div class=bg-gradient></div>
    <div class=bg-pattern></div>
    <div class="menu-bg">
  <div class="menu-container">
    <ul>
      
        <li class="menu-item">
          <a href="/">Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/archives">Docs</a>
        </li>
      
    </ul>
  </div>
</div>

<nav>
  <a></a>
</nav>

    <div class=container style='padding-bottom:40px'>
      <div class=row>
  <div class=col-sm-12>
    <header>
  <div class="logo">
    <h1 id="main-title" class="title"><a href="/">The clown is laughing at you</a></h1>
  </div>
</header>


    <section class=main>
      <div class=post>
  <div class=post-header>
    <h1 class=title>PHP之cookie-session</h1>
    <div class=post-info>
      <span class=date>2019-02-27</span>

      
    </div>
  </div>

  <div class=content>
    <!-- Gallery -->
    

    <p>关于cookie以及sesssion的知识点，我总结在另一篇博客里。</p>
<h1 id="PHP-Cookie"><a href="#PHP-Cookie" class="headerlink" title="PHP Cookie"></a>PHP Cookie</h1><p>cookie常用来识别用户。</p>
<h2 id="如何创建Cookie"><a href="#如何创建Cookie" class="headerlink" title="如何创建Cookie?"></a>如何创建Cookie?</h2><p>setcookie() 函数用于设置 cookie。</p>
<p><strong>注释：</strong>：setcookie() 函数必须位于 <html> 标签之前。</html></p>
<p>语法：<br>    <code>setcookie(name, value, expire, path, domain);</code></p>
<p>实例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">setcookie(&quot;user&quot;, &quot;runoob&quot;, time()+3600);</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">**注释：在发送 cookie 时，cookie 的值会自动进行 URL 编码，在取回时进行自动解码。（为防止 URL 编码，请使用 setrawcookie() 取而代之。）**</span><br><span class="line"></span><br><span class="line">实例二：</span><br></pre></td></tr></table></figure></p>
<p>&lt;?php<br>$expire=time()+60<em>60</em>24*30;<br>setcookie(“user”, “runoob”, $expire);<br>?&gt;</p>
<html>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在上面的实例中，过期时间被设置为一个月（60 秒 * 60 分 * 24 小时 * 30 天）。</span><br><span class="line"></span><br><span class="line">## 如何取回Cookie值</span><br><span class="line">这里使用到一个PHP的超级全局变量$_COOKIE</span><br><span class="line"></span><br><span class="line">PHP 的 $_COOKIE 变量用于取回 cookie 的值</span><br><span class="line"></span><br><span class="line">在下面的实例中，我们取回了名为&quot;user&quot;的cookie值，并把它显示在页面上：</span><br></pre></td></tr></table></figure>
<p>&lt;?php<br>// 输出 cookie 值<br>echo $_COOKIE[“user”];</p>
<p>// 查看所有 cookie<br>print_r($_COOKIE);<br>?&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在下面的实例中，我们使用 isset() 函数来确认是否已设置了 cookie：</span><br></pre></td></tr></table></figure></p>
<p><html></html></p>
<p><head><meta name="generator" content="Hexo 3.8.0"></head></p>
<p><meta charset="utf-8"></p>
<p><title>菜鸟教程(runoob.com)</title><br></p>
<body>

<p>&lt;?php<br>if (isset($_COOKIE[“user”]))<br>    echo “欢迎 “ . $_COOKIE[“user”] . “!<br>“;<br>else<br>    echo “普通访客!<br>“;<br>?&gt;</p>
<p></p></body><br></html><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## 如何删除 Cookie</span><br><span class="line">当删除 cookie 时，您应当使过期日期变更为过去的时间点。</span><br><span class="line"></span><br><span class="line">删除的实例：</span><br></pre></td></tr></table></figure><p></p>
<p>&lt;?php<br>// 设置 cookie 过期时间为过去 1 小时<br>setcookie(“user”, “”, time()-3600);<br>?&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">总结：所有的操作基本都与setcookie(),这个函数有关。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># PHP session</span><br><span class="line">## 开始 PHP Session</span><br><span class="line"></span><br><span class="line">session_start()函数</span><br><span class="line"></span><br><span class="line">在您把用户信息存储到 PHP session 中之前，**首先必须启动会话。**</span><br><span class="line"></span><br><span class="line">**注释**：session_start() 函数必须位于 &lt;html&gt; 标签之前：</span><br></pre></td></tr></table></figure></p>
<p>&lt;?php session_start(); ?&gt;</p>
<p><html></html></p>
<body>

<p></p></body><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">上面的代码会向服务器注册用户的会话，以便您可以开始保存用户信息，同时会为用户会话分配一个 UID。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">参考文章：</span><br><span class="line">[https://blog.csdn.net/zhengxijia2012/article/details/73437376](https://blog.csdn.net/zhengxijia2012/article/details/73437376)</span><br><span class="line">## 存储 Session 变量</span><br><span class="line">引入另外一个超全局变量$_SESSION。</span><br><span class="line"></span><br><span class="line">存储和取回 session 变量的正确方法是使用 PHP $_SESSION 变量：</span><br></pre></td></tr></table></figure><p></p>
<p>&lt;?php<br>session_start();<br>// 存储 session 数据<br>$_SESSION[‘views’]=1;<br>?&gt;</p>
<p><html></html></p>
<p><head><meta name="generator" content="Hexo 3.8.0"></head></p>
<p><meta charset="utf-8"></p>
<p><title>菜鸟教程(runoob.com)</title><br></p>
<body>

<p>&lt;?php<br>// 检索 session 数据<br>echo “浏览量：”. $_SESSION[‘views’];<br>?&gt;</p>
<p></p></body><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">输出：1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在下面的实例中，我们创建了一个简单的 page-view 计数器。isset() 函数检测是否已设置 &quot;views&quot; 变量。如果已设置 &quot;views&quot; 变量，我们累加计数器。如果 &quot;views&quot; 不存在，则创建 &quot;views&quot; 变量，并把它设置为 1：</span><br></pre></td></tr></table></figure><p></p>
<p>&lt;?php<br>session_start();</p>
<p>if(isset($_SESSION[‘views’]))<br>{<br>    $_SESSION[‘views’]=$_SESSION[‘views’]+1;<br>}<br>else<br>{<br>    $_SESSION[‘views’]=1;<br>}<br>echo “浏览量：”. $_SESSION[‘views’];<br>?&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 销毁 Session</span><br><span class="line"></span><br><span class="line">如果您希望删除某些 session 数据，可以使用 unset() 或 session_destroy() 函数。</span><br><span class="line"></span><br><span class="line">unset() 函数用于释放指定的 session 变量：</span><br></pre></td></tr></table></figure></p>
<p>&lt;?php<br>session_start();<br>if(isset($_SESSION[‘views’]))<br>{<br>    unset($_SESSION[‘views’]);<br>}<br>?&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">也可以通过调用 session_destroy() 函数彻底销毁 session：</span><br></pre></td></tr></table></figure></p>
<p>&lt;?php<br>session_destroy();<br>?&gt;<br><code>`</code><br><strong>注释：</strong>session_destroy() 将重置 session，您将失去所有已存储的 session 数据。</p>

    <span class='date end-date'>2019-02-27</span>
  </div>

  

  
</div>

    </section>
  </div>
</div>

    </div>
  </div>
  <footer class="footer-content">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
        <h2>About</h2>
        <section>
          Theme developed by <a href="//github.com/klugjo" target="_blank">Jonathan Klughertz</a><br>Contents created by <a href="//github.com/xaios" target="_blank">AIOS</a>
        </section>
      </div>
      
  <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
    <h2>New Contents</h2>
    <ul>
      
        <li>
          <a class="footer-post" href="/2019/02/27/php之文件以及文件上传/">php之文件以及文件上传</a>
        </li>
      
        <li>
          <a class="footer-post" href="/2019/02/27/PHP之cookie及session/">PHP之cookie-session</a>
        </li>
      
        <li>
          <a class="footer-post" href="/2019/02/26/php之面对对象/">php之面对对象</a>
        </li>
      
        <li>
          <a class="footer-post" href="/2019/02/26/php运算符/">php运算符</a>
        </li>
      
    </ul>
  </div>


      

    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <ul class="list-inline footer-social-icons"></ul>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="footer-copyright">@Untitled. All right reserved | Design & Hexo <a href="//www.codeblocq.com" target="_blank">Jonathan Klughertz</a></div>
      </div>
    </div>
  </div>
</footer>

</body>
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js"></script>
<script src="/js/main.js"></script>

